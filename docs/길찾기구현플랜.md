# 길찾기 기능 구현 플랜

> 작성일: 2026-01-11 (업데이트)
> 목적: 교육 일자리 플랫폼(쌤찾기)에 길찾기 기능 도입을 위한 연구 및 제안서

---

## 1. 경쟁 서비스 분석

### 1.1 네이버 지도 길찾기

**테스트 경로**: 강남역 → 서울역

#### 대중교통 길찾기 특징
| 항목 | 내용 |
|------|------|
| 경로 옵션 | 최적, 최소도보, 최소환승 |
| 표시 정보 | 소요시간, 도보시간, 환승횟수, 요금, 거리 |
| 실시간 정보 | 버스/지하철 도착 예정 시간 표시 |
| 상세 경로 | 역 이름, 노선 번호, 승하차 정보, 환승 안내 |
| 부가 기능 | 경로 저장, 공유, 출발 알림 |

#### 자동차 길찾기 특징
| 항목 | 내용 |
|------|------|
| 경로 옵션 | 실시간 추천, 최단거리, 무료도로, 고속도로 우선 등 |
| 표시 정보 | 소요시간, 거리, 통행료, 택시비, 주유비 |
| 실시간 정보 | 교통 상황 (원활/서행/정체) |
| 상세 경로 | 턴바이턴 안내, 교차로 명칭, 이동거리 |
| 부가 기능 | 네이버 내비 연동, 경로 공유 |

---

### 1.2 카카오맵 길찾기

**테스트 경로**: 강남역 2호선 → 서울역

#### 대중교통 길찾기 특징
| 항목 | 내용 |
|------|------|
| 경로 옵션 | 전체, 버스만, 지하철만, 버스+지하철 |
| 표시 정보 | 소요시간, 도보시간, 환승횟수, 요금, 거리 |
| 결과 개수 | 11개 경로 (다양한 대안 제시) |
| 상세 경로 | 노선 색상, 역 이름, 방면 정보 |
| 지도 연동 | 경로 라인 및 승/환승/하차 마커 표시 |

#### 자동차 길찾기 특징
| 항목 | 내용 |
|------|------|
| 경로 옵션 | 내비추천, 경로 옵션 (편한길, 최단거리 등) |
| 표시 정보 | 소요시간, 거리, 통행료, 택시비, 주유비 |
| 교통 상황 | 구간별 원활/서행/지체 표시 |
| 상세 경로 | 13단계 턴바이턴 안내, 로드뷰 연동 |
| 부가 기능 | 카카오내비 연동, 경로 인쇄, 경로 한눈에 |

---

## 2. API 조사 결과 (자체 구현용)

### 2.1 자동차 길찾기 - 카카오 모빌리티 API

**공식 문서**: [developers.kakaomobility.com](https://developers.kakaomobility.com/docs/navi-api/directions/)

| 항목 | 내용 |
|------|------|
| 엔드포인트 | `https://apis-navi.kakaomobility.com/v1/directions` |
| 인증 | `Authorization: KakaoAK {REST_API_KEY}` |
| 필수 파라미터 | `origin` (출발 좌표), `destination` (도착 좌표) |
| 선택 파라미터 | `waypoints` (경유지, 최대 5개), `priority` (RECOMMEND/TIME/DISTANCE), `avoid` (회피 옵션) |
| 응답 정보 | 경로, 거리(m), 소요시간(초), 택시요금, 통행료, 구간별 안내 |
| 무료 할당량 | 별도 확인 필요 (API 신청 후) |

**요청 예시**:
```bash
curl "https://apis-navi.kakaomobility.com/v1/directions?origin=127.027610,37.498095&destination=126.972559,37.554697" \
  -H "Authorization: KakaoAK {REST_API_KEY}"
```

---

### 2.2 대중교통 길찾기 - ODsay API (권장)

**공식 문서**: [lab.odsay.com](https://lab.odsay.com/guide/guide)

> **중요**: 카카오 모빌리티는 대중교통 API를 제공하지 않음. ODsay가 국내 대중교통 경로 탐색의 대표 API.

| 항목 | 내용 |
|------|------|
| 엔드포인트 | `https://api.odsay.com/v1/api/searchPubTransPathT` |
| 인증 | `apiKey` 쿼리 파라미터 |
| 필수 파라미터 | `SX`, `SY` (출발 좌표), `EX`, `EY` (도착 좌표) |
| 선택 파라미터 | `OPT` (정렬 방식), `SearchPathType` (지하철/버스/모두) |
| 응답 정보 | 경로, 소요시간, 환승정보, 요금, 노선 상세 |
| **무료 할당량** | **일 1,000건** (Basic, 6개월 무료) |
| 유료 요금 | 협의 (일 1,000건 초과 시) |

**요청 예시**:
```bash
curl "https://api.odsay.com/v1/api/searchPubTransPathT?SX=127.027610&SY=37.498095&EX=126.972559&EY=37.554697&apiKey={ODSAY_API_KEY}"
```

**대안: TMAP 대중교통 API**
- 무료: 일 10건 (매우 적음)
- 유료: 0.88원/건
- [transit.tmapmobility.com](https://transit.tmapmobility.com/)

---

### 2.3 도보 길찾기 - 카카오 모빌리티 도보 API

**공식 문서**: [developers.kakaomobility.com](https://developers.kakaomobility.com/)

| 항목 | 내용 |
|------|------|
| 엔드포인트 | 카카오 모빌리티 Directions API (도보용) |
| 인증 | `Authorization: KakaoAK {REST_API_KEY}` |
| 응답 정보 | 경로, 거리, 소요시간, 턴바이턴 안내 |
| 비고 | 별도 API 사용 권한 신청 필요 |

---

### 2.4 API 조합 전략 (권장)

| 교통수단 | API | 이유 |
|---------|-----|------|
| **자동차** | 카카오 모빌리티 | 이미 카카오맵 사용 중, 일관성 |
| **대중교통** | ODsay | 가장 풍부한 무료 할당량 (일 1,000건) |
| **도보** | 카카오 모빌리티 | 카카오 일관성 유지 |

---

## 3. 자체 구현 아키텍처

### 3.1 시스템 구조

```
┌─────────────────────────────────────────────────────────────┐
│                      프론트엔드 (React)                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐    ┌─────────────────────────────┐    │
│  │ DirectionsModal │───▶│ 출발지/도착지 입력           │    │
│  └─────────────────┘    │ (카카오 로컬 API로 좌표 변환) │    │
│           │             └─────────────────────────────┘    │
│           ▼                                                 │
│  ┌─────────────────────────────────────────────────────┐   │
│  │             교통수단 선택 (탭)                        │   │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐             │   │
│  │  │ 🚗     │  │ 🚌     │  │ 🚶     │             │   │
│  │  │ 자동차  │  │대중교통 │  │  도보   │             │   │
│  │  └────┬────┘  └────┬────┘  └────┬────┘             │   │
│  └───────┼────────────┼────────────┼───────────────────┘   │
│          │            │            │                        │
│          ▼            ▼            ▼                        │
│  ┌───────────┐ ┌───────────┐ ┌───────────┐                │
│  │ 카카오    │ │  ODsay    │ │ 카카오    │                │
│  │모빌리티API│ │   API     │ │도보 API   │                │
│  └───────────┘ └───────────┘ └───────────┘                │
│          │            │            │                        │
│          └────────────┴────────────┘                        │
│                       │                                     │
│                       ▼                                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              경로 결과 표시                          │   │
│  │  • 경로 리스트 (시간, 거리, 비용)                   │   │
│  │  • 지도 위 Polyline (경로 라인)                     │   │
│  │  • 상세 안내 (턴바이턴)                             │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 데이터 플로우

```
1. 주소 입력
   └─▶ 카카오 로컬 API (dapi.kakao.com/v2/local/search/address)
       └─▶ 좌표 (lat, lng) 반환

2. 경로 탐색 요청
   ├─▶ [자동차] apis-navi.kakaomobility.com/v1/directions
   ├─▶ [대중교통] api.odsay.com/v1/api/searchPubTransPathT
   └─▶ [도보] 카카오 모빌리티 도보 API

3. 경로 표시
   └─▶ 카카오맵 Polyline API (kakao.maps.Polyline)
       └─▶ 응답의 좌표 배열로 경로 라인 그리기
```

---

## 4. 프론트엔드 UI/UX 설계

### 4.1 진입점: JobDetailPanel 내 "길찾기" 버튼

```
┌─────────────────────────────┐
│ 상세 정보                 ✕ │
├─────────────────────────────┤
│ 기관명: OO중학교            │
│ 위치: 서울시 강남구 ...     │
│ 보수: 월 250만원            │
│ 마감일: 2026-01-20          │
├─────────────────────────────┤
│ [🗺️ 길찾기]  [📎 원문보기]  │
└─────────────────────────────┘
        │
        ▼ 클릭 시 모달 오픈
```

### 4.2 DirectionsModal 컴포넌트

```
┌───────────────────────────────────────────┐
│ 길찾기                                  ✕ │
├───────────────────────────────────────────┤
│                                           │
│  출발지                                   │
│  ┌───────────────────────────────────┐   │
│  │ 📍 현재 위치 사용                  │   │
│  └───────────────────────────────────┘   │
│  또는                                     │
│  ┌───────────────────────────────────┐   │
│  │ 주소 검색...                       │   │
│  └───────────────────────────────────┘   │
│                                           │
│  도착지                                   │
│  ┌───────────────────────────────────┐   │
│  │ 🏫 OO중학교                        │   │
│  │    서울시 강남구 OO로 123          │   │
│  └───────────────────────────────────┘   │
│                                           │
│  ┌──────────┬──────────┬──────────┐      │
│  │   🚗    │   🚌    │   🚶    │      │
│  │  자동차  │ 대중교통 │   도보   │      │
│  └──────────┴──────────┴──────────┘      │
│                                           │
├───────────────────────────────────────────┤
│           [ 경로 검색하기 ]               │
└───────────────────────────────────────────┘
```

### 4.3 경로 결과 화면 - 대중교통

```
┌───────────────────────────────────────────┐
│ 길찾기 결과                             ✕ │
├───────────────────────────────────────────┤
│  ┌──────────┬──────────┬──────────┐      │
│  │  자동차  │[대중교통]│   도보   │      │
│  └──────────┴──────────┴──────────┘      │
│                                           │
│  경로 1 (최적)                      34분  │
│  ┌───────────────────────────────────┐   │
│  │ 🟢 2호선 강남 → 사당             │   │
│  │ 🔵 4호선 사당 → 서울역           │   │
│  │                                   │   │
│  │ 환승 1회 | 요금 1,650원 | 15.4km │   │
│  └───────────────────────────────────┘   │
│                                           │
│  경로 2                             47분  │
│  ┌───────────────────────────────────┐   │
│  │ 🟢 2호선 강남 → 동대문역사문화공원│   │
│  │ 🔵 4호선 동대문 → 서울역         │   │
│  │                                   │   │
│  │ 환승 1회 | 요금 1,650원 | 22.6km │   │
│  └───────────────────────────────────┘   │
│                                           │
├───────────────────────────────────────────┤
│        [ 지도에서 경로 보기 ]             │
└───────────────────────────────────────────┘
```

### 4.4 경로 결과 화면 - 자동차

```
┌───────────────────────────────────────────┐
│ 길찾기 결과                             ✕ │
├───────────────────────────────────────────┤
│  ┌──────────┬──────────┬──────────┐      │
│  │[자동차] │ 대중교통 │   도보   │      │
│  └──────────┴──────────┴──────────┘      │
│                                           │
│  ┌───────────────────────────────────┐   │
│  │        🚗 24분 | 11.5km          │   │
│  │                                   │   │
│  │  통행료    택시비     주유비     │   │
│  │   0원    13,700원   1,627원     │   │
│  └───────────────────────────────────┘   │
│                                           │
│  상세 경로                                │
│  ┌───────────────────────────────────┐   │
│  │ 1. 출발: 현재 위치                │   │
│  │ 2. 서초대로 171m 이동 (서행)     │   │
│  │ 3. 우회전, 테헤란로4길 188m      │   │
│  │ 4. 우회전, 강남대로84길 160m     │   │
│  │ 5. 우회전, 강남대로 4.3km        │   │
│  │ ...                               │   │
│  │ 13. 도착: OO중학교                │   │
│  └───────────────────────────────────┘   │
│                                           │
├───────────────────────────────────────────┤
│        [ 지도에서 경로 보기 ]             │
└───────────────────────────────────────────┘
```

### 4.5 지도 위 경로 표시

기존 Hero.tsx의 카카오맵에 경로 Polyline 오버레이:

```javascript
// 경로 좌표 배열로 Polyline 생성
const polyline = new kakao.maps.Polyline({
  map: map,
  path: routeCoords.map(coord =>
    new kakao.maps.LatLng(coord.lat, coord.lng)
  ),
  strokeWeight: 5,
  strokeColor: '#5B6EF7',  // 브랜드 컬러
  strokeOpacity: 0.8,
  strokeStyle: 'solid'
});

// 출발/도착 마커
const startMarker = new kakao.maps.Marker({
  position: startCoord,
  image: startMarkerImage  // 초록색 출발 아이콘
});

const endMarker = new kakao.maps.Marker({
  position: endCoord,
  image: endMarkerImage  // 빨간색 도착 아이콘
});
```

---

## 5. 파일 구조 및 컴포넌트

### 5.1 새로 생성할 파일

```
src/
├── components/
│   └── directions/
│       ├── DirectionsModal.tsx      # 메인 모달 컴포넌트
│       ├── DirectionsForm.tsx       # 출발지/도착지 입력 폼
│       ├── TransportTabs.tsx        # 교통수단 탭 (자동차/대중교통/도보)
│       ├── RouteResults.tsx         # 경로 결과 리스트
│       ├── TransitRouteCard.tsx     # 대중교통 경로 카드
│       ├── CarRouteCard.tsx         # 자동차 경로 카드
│       ├── WalkRouteCard.tsx        # 도보 경로 카드
│       └── RoutePolyline.tsx        # 지도 위 경로 라인
│
├── lib/
│   └── api/
│       ├── directions.ts            # 카카오 모빌리티 자동차 API
│       ├── transit.ts               # ODsay 대중교통 API
│       └── walking.ts               # 카카오 모빌리티 도보 API
│
└── types/
    └── directions.ts                # 길찾기 관련 타입 정의
```

### 5.2 환경 변수 추가

```env
# .env.local
VITE_KAKAO_MOBILITY_API_KEY=your_kakao_mobility_key
VITE_ODSAY_API_KEY=your_odsay_key
```

---

## 6. 비용 및 리소스 분석

### 6.1 API 비용 추정 (월간)

| API | 무료 할당량 | 초과 시 비용 | 예상 사용량 | 월 비용 |
|-----|-----------|------------|-----------|--------|
| 카카오 모빌리티 (자동차) | ~3,000건/일* | 약 10원/건 | 500건/월 | **무료~5천원** |
| ODsay (대중교통) | **1,000건/일** | 협의 | 500건/월 | **무료** |
| 카카오 모빌리티 (도보) | ~3,000건/일* | 약 10원/건 | 200건/월 | **무료~2천원** |

> *카카오 모빌리티 무료 할당량은 공식 문서에서 명확하지 않음 - 실제 신청 후 확인 필요

**총 예상 비용: 무료 ~ 월 1만원 이내**

### 6.2 개발 리소스

| 기능 | 난이도 | 예상 시간 |
|-----|-------|---------|
| 출발지/도착지 UI | 쉬움 | 1일 |
| 교통수단 탭 | 쉬움 | 0.5일 |
| 자동차 API 연동 | 중간 | 1일 |
| 대중교통 API 연동 | 중간 | 1.5일 |
| 도보 API 연동 | 중간 | 1일 |
| 경로 결과 리스트 UI | 중간 | 1.5일 |
| 지도 Polyline 표시 | 쉬움 | 0.5일 |
| **총계** | | **7일** |

---

## 7. 구현 체크리스트

### Phase 1: API 키 발급 및 환경 설정 (1일)

- [ ] 카카오 모빌리티 API 신청 ([developers.kakaomobility.com](https://developers.kakaomobility.com/))
- [ ] ODsay API 신청 ([lab.odsay.com](https://lab.odsay.com/))
- [ ] 환경 변수 설정 (`.env.local`)
- [ ] API 키 테스트 (curl로 호출 확인)

### Phase 2: API 서비스 레이어 (2일)

- [ ] `src/lib/api/directions.ts` - 자동차 경로 API
- [ ] `src/lib/api/transit.ts` - 대중교통 경로 API
- [ ] `src/lib/api/walking.ts` - 도보 경로 API
- [ ] 타입 정의 (`src/types/directions.ts`)

### Phase 3: UI 컴포넌트 (3일)

- [ ] `DirectionsModal.tsx` - 메인 모달
- [ ] `DirectionsForm.tsx` - 입력 폼
- [ ] `TransportTabs.tsx` - 탭 UI
- [ ] `RouteResults.tsx` - 결과 리스트
- [ ] `TransitRouteCard.tsx` - 대중교통 카드
- [ ] `CarRouteCard.tsx` - 자동차 카드
- [ ] `WalkRouteCard.tsx` - 도보 카드

### Phase 4: 지도 연동 (1일)

- [ ] `RoutePolyline.tsx` - 경로 라인 표시
- [ ] 출발/도착 마커 커스텀
- [ ] Hero.tsx와 연동

### Phase 5: 테스트 및 최적화 (1일)

- [ ] 다양한 경로 테스트
- [ ] 에러 핸들링
- [ ] 로딩 상태 UI
- [ ] 모바일 반응형 확인

---

## 8. 결론

### 자체 구현 가능 여부: ✅ 완전히 가능

| 항목 | 결론 |
|------|------|
| 기술적 가능성 | 카카오 모빌리티 + ODsay API 조합으로 모든 교통수단 지원 가능 |
| 비용 | 무료~월 1만원 이내 (사용량 낮을 경우 무료) |
| 개발 기간 | 약 7일 (1주일) |
| 품질 | 전문 지도 서비스 수준의 경로 정보 제공 가능 |

### 권장 구현 순서

```
1. [즉시] API 키 발급 신청
2. [1주차] 자동차 + 대중교통 기본 기능 구현
3. [2주차] 도보 + UI 개선 + 테스트
4. [이후] 사용자 피드백 기반 개선
```

### 외부 링크 vs 자체 구현 비교

| 항목 | 외부 링크 방식 | 자체 구현 |
|------|--------------|----------|
| 개발 기간 | 1-2일 | 7일 |
| API 비용 | 무료 | 무료~월 1만원 |
| 사용자 경험 | 외부 이탈 발생 | **서비스 내 완결** |
| 브랜드 일관성 | 단절 | **유지** |
| 기능 커스터마이징 | 불가능 | **가능** |
| **권장 여부** | 단기 MVP용 | **장기적으로 권장** |

---

## 9. 참고 자료

### API 문서
- [카카오 모빌리티 API](https://developers.kakaomobility.com/)
- [ODsay API](https://lab.odsay.com/guide/guide)
- [TMAP 대중교통 API](https://transit.tmapmobility.com/)
- [카카오맵 JavaScript API](https://apis.map.kakao.com/web/guide/)

### 스크린샷 위치
```
.playwright-mcp/
├── naver-map-transit-directions.png  # 네이버 대중교통
├── naver-map-car-directions.png      # 네이버 자동차
├── kakao-map-transit-directions.png  # 카카오 대중교통
└── kakao-map-car-directions.png      # 카카오 자동차
```

---

*본 문서는 코드 수정 없이 연구 및 제안 목적으로 작성되었습니다.*
*업데이트: 자체 구현 방안 및 상세 UI/UX 설계 추가*
