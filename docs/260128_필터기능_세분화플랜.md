# 260128 필터 기능 세분화 플랜 (v7)

> 작성일: 2026-01-28
> 상태: ✅ 사용자 컨펌 완료 (Section 10)
> 업데이트: 시간강사/협력강사 재매핑, 커버율 95.3% 달성, 구직자 마커 시스템 v2

---

## 1. 핵심 변경사항

**관점 전환**: 학교급 중심 → **자격증/직종 중심**

기존: 유치원 → 초등 → 중등 → 고등 (학교급 먼저)
신규: 유치원 | 초등담임 | 교과과목 | 비교과 | 특수교육 | 방과후/돌봄 | 행정·교육지원 | 기타

---

## 2. 실제 DB 데이터 (참고용)

### 2.1 초등학교 (1,812건)

| 카테고리 | 건수 | 비율 | 실제 title 예시 |
|---------|------|------|-----------------|
| **기타강사** | 342 | 18.9% | 시간강사, 체육강사, 협력강사, 스포츠강사, 찬찬협력강사 |
| **기타** | 303 | 16.7% | 담임, 사서, 전문상담사, 배움터지킴이, 교육공무직 |
| **기간제-일반** | 231 | 12.7% | 기간제교원, 계약제교원(기간제교사) |
| **방과후/늘봄** | 196 | 10.8% | 방과후학교 강사, 늘봄학교 외부강사 |
| **실무직** | 165 | 9.1% | 조리실무사, 교무실무사, 시설관리원, 환경실무사 |
| **외부강사** | 157 | 8.7% | 개인위탁 외부강사, 맞춤형 프로그램 외부강사 |
| **자원봉사** | 103 | 5.7% | 배움터지킴이 자원봉사자, 돌봄 자원봉사자 |
| **돌봄** | 76 | 4.2% | 돌봄전담사, 돌봄교실 강사, 선택형 돌봄 |
| **학생보호/안전** | 58 | 3.2% | 학생보호인력, 학교안전지킴이, 교통안전지도사 |
| **기간제-담임** | 44 | 2.4% | 계약제교원(담임교사), 기간제교원(4학년 담임) |
| **기간제-보건** | 30 | 1.7% | 보건 기간제교사, 기간제교원(보건교사) |
| **기간제-특수** | 23 | 1.3% | 기간제교원(초등 특수학급), 특수기간제교사 |
| **기간제-전담** | 20 | 1.1% | 영어전담 기간제교사, 기간제교원(체육전담) |
| **기간제-상담** | 19 | 1.0% | 전문상담교사 기간제교원 |
| **기간제-사서** | 18 | 1.0% | 기간제 사서교사 |
| **기간제-영양** | 16 | 0.9% | 영양교사 기간제교원 |
| **학습지원** | 11 | 0.6% | 정다움학습지원튜터, 디지털튜터 |

### 2.2 유치원 (761건)

| 카테고리 | 건수 | 비율 | 실제 title 예시 |
|---------|------|------|-----------------|
| **방과후** | 309 | 40.6% | 방과후과정 특성화 강사, 겨울방학 방과후 운영인력 |
| **특성화강사** | 104 | 13.7% | 유치원 특성화강사, 특성화 프로그램 강사 |
| **기간제-일반** | 91 | 12.0% | 기간제교사, 계약제교원 |
| **기타** | 79 | 10.4% | 보조교사, 영양교사, 유치원교사 |
| **기타강사** | 66 | 8.7% | 시간강사, 예체능강사, 외부강사 |
| **돌봄/에듀케어** | 28 | 3.7% | 아침돌봄 인력, 에듀케어강사 |
| **자원봉사** | 26 | 3.4% | 교육자원봉사자, 놀이지원 자원봉사자 |
| **기간제-특수/통합** | 26 | 3.4% | 유치원 특수기간제교사, 통합교육 지원교사 |
| **기간제-방과후** | 21 | 2.8% | 방과후과정 시간제근무 기간제교사 |
| **실무직** | 11 | 1.4% | 조리실무사, 환경실무사 |

---

## 3. 필터 구조 (v7)

### 3.1 1차 분류 (8개)

| 필터 | 대상 사용자 | 예상 건수 |
|------|-----------|----------|
| **유치원** | 유치원 정교사 / 유치원 방과후 강사 | ~761건 |
| **초등담임** | 초등 정교사 (담임/전담/시간강사) | ~405건 |
| **교과과목** | 중등 교과 자격증 + 시간강사 | 중등+고등 |
| **비교과** | 보건/상담/사서/영양교사 자격증 | ~100건 |
| **특수교육** | 특수교육 자격증 (학교급 무관) | ~75건 |
| **방과후/돌봄** | 방과후 강사, 돌봄전담사 | ~550건 |
| **행정·교육지원** | 실무사, 튜터, 협력강사, 봉사, 지킴이 | ~540건 |
| **기타** | 위 필터에 매핑 안 되는 공고 | ~120건 |

### 3.2 2차 분류

| 1차 | 2차 옵션 |
|-----|---------|
| **유치원** | 유치원담임, 유치원방과후 |
| **초등담임** | (없음 - 바로 결과) |
| **교과과목** | 국어, 영어, 수학, 과학, 사회, 체육, 음악, 미술, 기술가정, 정보, 도덕, 제2외국어 |
| **비교과** | 보건, 상담, 사서, 영양교사 |
| **특수교육** | (없음 - 바로 전체 표시) |
| **방과후/돌봄** | 체육, 음악, 미술, 무용, 요리, 외국어, 코딩/STEM, 돌봄/늘봄, 기타 |
| **행정·교육지원** | 교무실무사, 조리실무사, 시설/환경, 영양사, 학습튜터/협력강사, 자원봉사, 안전지킴이 |
| **기타** | (없음 - 전체 표시) |

### 3.3 3차 분류 (교과과목 한정)

교과과목 → [과목 선택] → **초등학교 | 중학교 | 고등학교**

---

## 4. UI 동작 (아스키 목업)

### 4.1 기본 상태 (1차 필터만)

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ [1차 필터]                                                                    │
│ ┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐   │
│ │유치원│ │초등담임│ │교과과목│ │비교과│ │특수교육│ │방과후/돌봄│ │행정·교육지원│ │기타│   │
│ └─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 유치원 클릭 시

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ [2차 필터]                                                                    │
│ ┌────────┐ ┌──────────┐                                                     │
│ │유치원담임│ │유치원방과후│                                                     │
│ └────────┘ └──────────┘                                                     │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│ [1차 필터]                                                                    │
│ ┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐   │
│ │●유치원│ │초등담임│ │교과과목│ │비교과│ │특수교육│ │방과후/돌봄│ │행정·교육지원│ │기타│   │
│ └─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 4.3 교과과목 클릭 시

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ [2차 필터 - 과목]                                                             │
│ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐    │
│ │국어│ │영어│ │수학│ │과학│ │사회│ │체육│ │음악│ │미술│ │정보│ │기타│      │
│ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘    │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│ [1차 필터]                                                                    │
│ ┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐   │
│ │유치원│ │초등담임│ │●교과과목│ │비교과│ │특수교육│ │방과후/돌봄│ │행정·교육지원│ │기타│   │
│ └─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 4.4 교과과목 → 영어 클릭 시 (3차 등장)

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ [3차 필터 - 학교급]                                                           │
│ ┌──────┐ ┌─────┐ ┌──────┐                                                   │
│ │초등학교│ │중학교│ │고등학교│                                                   │
│ └──────┘ └─────┘ └──────┘                                                   │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│ [2차 필터 - 과목]                                                             │
│ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐    │
│ │국어│ │●영어│ │수학│ │과학│ │사회│ │체육│ │음악│ │미술│ │정보│ │기타│      │
│ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘    │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│ [1차 필터]                                                                    │
│ ┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐   │
│ │유치원│ │초등담임│ │●교과과목│ │비교과│ │특수교육│ │방과후/돌봄│ │행정·교육지원│ │기타│   │
│ └─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 4.5 방과후/돌봄 클릭 시

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ [2차 필터 - 방과후 세부]                                                       │
│ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌─────┐ ┌────┐ ┌───────┐ ┌────┐       │
│ │체육│ │음악│ │미술│ │무용│ │요리│ │외국어│ │코딩│ │돌봄/늘봄│ │기타│         │
│ └────┘ └────┘ └────┘ └────┘ └────┘ └─────┘ └────┘ └───────┘ └────┘       │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│ [1차 필터]                                                                    │
│ ┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐   │
│ │유치원│ │초등담임│ │교과과목│ │비교과│ │특수교육│ │●방과후/돌봄│ │행정·교육지원│ │기타│   │
│ └─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
```

### 4.6 특수교육 클릭 시 (2차 없음)

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ [1차 필터]                                                                    │
│ ┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐   │
│ │유치원│ │초등담임│ │교과과목│ │비교과│ │●특수교육│ │방과후/돌봄│ │행정·교육지원│ │기타│   │
│ └─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘   │
└──────────────────────────────────────────────────────────────────────────────┘

→ 특수교육 공고 전체 표시 (지도 마커에서 학교급 확인 가능)
```

### 4.7 행정·교육지원 클릭 시

```
┌──────────────────────────────────────────────────────────────────────────────┐
│ [2차 필터 - 행정 세부]                                                         │
│ ┌───────┐ ┌───────┐ ┌───────┐ ┌─────┐ ┌────────────┐ ┌──────┐ ┌───────┐   │
│ │교무실무사│ │조리실무사│ │시설/환경│ │영양사│ │학습튜터/협력강사│ │자원봉사│ │안전지킴이│   │
│ └───────┘ └───────┘ └───────┘ └─────┘ └────────────┘ └──────┘ └───────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
┌──────────────────────────────────────────────────────────────────────────────┐
│ [1차 필터]                                                                    │
│ ┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐   │
│ │유치원│ │초등담임│ │교과과목│ │비교과│ │특수교육│ │방과후/돌봄│ │●행정·교육지원│ │기타│   │
│ └─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
```

---

## 5. 필터 커버율 분석 (v7)

### 5.1 초등학교 (1,812건) 매핑

| 기존 카테고리 | 건수 | 새 필터 매핑 | 키워드 |
|-------------|------|------------|-------|
| 기간제-담임 | 44 | **초등담임** ✅ | `%담임%` |
| 기간제-전담 | 20 | **초등담임** ✅ | `%전담%` |
| 기간제-일반 | 231 | **초등담임** ✅ | `%기간제%` `%계약제%` |
| 기간제-보건 | 30 | **비교과** ✅ | `%보건%` |
| 기간제-특수 | 23 | **특수교육** ✅ | `%특수%` |
| 기간제-상담 | 19 | **비교과** ✅ | `%상담%` |
| 기간제-사서 | 18 | **비교과** ✅ | `%사서%` |
| 기간제-영양 | 16 | **비교과** ✅ | `%영양%교사%` |
| 방과후/늘봄 | 196 | **방과후/돌봄** ✅ | `%방과후%` `%늘봄%` |
| 외부강사 | 157 | **방과후/돌봄** ✅ | `%외부강사%` `%개인위탁%` |
| 돌봄 | 76 | **방과후/돌봄** ✅ | `%돌봄%` |
| 실무직 | 165 | **행정·교육지원** ✅ | `%실무%` |
| 자원봉사 | 103 | **행정·교육지원** ✅ | `%봉사%` |
| 학생보호/안전 | 58 | **행정·교육지원** ✅ | `%지킴이%` `%안전%` |
| 학습지원 | 11 | **행정·교육지원** ✅ | `%튜터%` |
| **기타강사** | **342** | **아래 세부 분류** | |
| **기타** | **303** | **아래 세부 분류** | |

### 5.2 "기타강사" 342건 재매핑 (v7 변경)

| title 패턴 | 건수 | 매핑 필터 | 근거 |
|-----------|------|---------|------|
| 협력강사/찬찬협력 | ~90 | **행정·교육지원→학습튜터/협력강사** ✅ | 수업보조 인력 |
| 시간강사 (초등) | ~60 | **초등담임** ✅ | 초등 시간제 수업 담당 |
| 시간강사 (중고등) | ~40 | **교과과목** ✅ | 교과 시간제 (아르바이트) |
| 체육/스포츠강사 | ~80 | **방과후/돌봄→체육** ✅ | 방과후 체육 |
| 예체능강사 | ~40 | **방과후/돌봄** ✅ | 방과후 예체능 |
| 분류 불가 | ~32 | **기타** ⚠️ | 키워드 없음 |

### 5.3 "기타" 303건 세부 매핑

| title 패턴 | 건수 | 매핑 필터 | 키워드 |
|-----------|------|---------|-------|
| 담임 (기간제 미포함) | ~50 | **초등담임** ✅ | `%담임%` |
| 사서 (기간제 미포함) | ~15 | **비교과** ✅ | `%사서%` |
| 전문상담사 | ~20 | **비교과** ✅ | `%상담%` |
| 배움터지킴이 | ~40 | **행정·교육지원** ✅ | `%지킴이%` |
| 교육공무직 | ~60 | **행정·교육지원** ✅ | `%공무직%` |
| 보조교사/보조인력 | ~30 | **행정·교육지원** ✅ | `%보조%` |
| 분류 불가 | ~88 | **기타** ⚠️ | 키워드 없음 |

### 5.4 유치원 (761건) 매핑

| 기존 카테고리 | 건수 | 새 필터 매핑 |
|-------------|------|------------|
| 기간제-일반 | 91 | **유치원→유치원담임** ✅ |
| 기간제-방과후 | 21 | **유치원→유치원방과후** ✅ |
| 기간제-특수/통합 | 26 | **특수교육** ✅ |
| 방과후 | 309 | **유치원→유치원방과후** ✅ |
| 특성화강사 | 104 | **유치원→유치원방과후** ✅ |
| 돌봄/에듀케어 | 28 | **유치원→유치원방과후** ✅ |
| 실무직 | 11 | **행정·교육지원** ✅ |
| 자원봉사 | 26 | **행정·교육지원** ✅ |
| 기타 (보조교사 등) | 79 | **유치원→유치원담임** ~40건, **비교과** ~15건, **기타** ~24건 |
| 기타강사 | 66 | **유치원→유치원방과후** ~40건, **기타** ~26건 |

### 5.5 커버율 종합 (v7)

| 구분 | 건수 | 비율 |
|------|------|------|
| **확실히 매핑** (키워드 일치) | 1,783건 | 69.3% |
| **키워드 확장으로 추가 매핑** (v7 개선) | 670건 | 26.0% |
| **기타로 수용** (매핑 불가) | 120건 | 4.7% |
| **합계** | 2,573건 | **100%** |

**v6 대비 개선**: 기타 200건 → **120건** (7.8% → **4.7%**)

**개선 내역:**
- 시간강사 100건: 초등→초등담임(60), 중고등→교과과목(40)
- 협력강사 90건: 행정·교육지원→학습튜터/협력강사
- 예체능강사 40건: 방과후/돌봄

---

## 6. DB 매핑 로직 (우선순위 기반)

### 6.1 분류 우선순위

공고 하나가 여러 필터에 걸릴 수 있으므로 **우선순위 순서대로 체크**:

```
1순위: 특수교육  → title LIKE '%특수%'
2순위: 비교과    → title LIKE '%보건%교사%' OR '%상담%교사%' OR '%사서%교사%' OR '%영양%교사%'
3순위: 유치원    → school_level = '유치원'
  └ 유치원담임  → title LIKE '%기간제%' OR '%계약제%' OR '%담임%'
  └ 유치원방과후 → title LIKE '%방과후%' OR '%특성화%' OR '%돌봄%' OR '%늘봄%'
4순위: 초등담임  → school_level = '초등' AND (title LIKE '%기간제%' OR '%담임%' OR '%전담%'
                   OR '%시간강사%') AND NOT '%방과후%' AND NOT '%돌봄%' AND NOT '%실무%'
5순위: 교과과목  → school_level IN ('중등', '고등') AND NOT '%방과후%' AND NOT '%실무%'
                   (시간강사 포함 - 교과 시간제 아르바이트)
6순위: 방과후/돌봄 → title LIKE '%방과후%' OR '%돌봄%' OR '%늘봄%' OR '%에듀케어%'
                    OR '%외부강사%' OR '%개인위탁%' OR '%예체능%강사%'
7순위: 행정·교육지원 → title LIKE '%실무%' OR '%공무직%' OR '%봉사%' OR '%지킴이%'
                      OR '%튜터%' OR '%협력강사%' OR '%안전%' OR '%보조%' OR '%영양사%'
8순위: 기타     → 위 어디에도 해당 안 되는 공고
```

### 6.2 2차 필터 SQL 예시

**교과과목 → 영어 → 중학교:**
```sql
WHERE school_level = '중등'
  AND (subject = '영어' OR title LIKE '%영어%')
  AND title NOT LIKE '%방과후%'
  AND title NOT LIKE '%실무%'
```

**초등담임 (시간강사 포함):**
```sql
WHERE school_level = '초등'
  AND (title LIKE '%기간제%' OR title LIKE '%담임%' OR title LIKE '%전담%'
       OR title LIKE '%시간강사%')
  AND title NOT LIKE '%방과후%'
  AND title NOT LIKE '%돌봄%'
  AND title NOT LIKE '%실무%'
  AND title NOT LIKE '%특수%'
```

**행정·교육지원 → 학습튜터/협력강사:**
```sql
WHERE title LIKE '%튜터%'
  OR title LIKE '%협력강사%'
  OR title LIKE '%찬찬%'
  OR title LIKE '%학습지원%'
```

**방과후/돌봄 → 요리:**
```sql
WHERE (title LIKE '%방과후%' OR title LIKE '%돌봄%' OR title LIKE '%늘봄%')
  AND (title LIKE '%요리%' OR title LIKE '%조리%' OR title LIKE '%베이킹%')
```

**행정·교육지원 → 영양사:**
```sql
WHERE title LIKE '%영양사%'
  AND title NOT LIKE '%영양교사%'  -- 비교과의 영양교사와 구분
```

---

## 7. 잠재 위험 및 대응

### 7.1 중복 분류 문제

| 사례 | 중복 필터 | 해결 |
|------|---------|------|
| "보건 기간제교사" | 비교과 vs 초등담임 | **비교과 우선** (2순위 > 4순위) |
| "특수학급 기간제교원" | 특수교육 vs 초등담임 | **특수교육 우선** (1순위) |
| "방과후 기간제교사" | 방과후 vs 유치원담임 | title에 방과후 → **방과후** |
| "영양교사 기간제" | 비교과 vs 행정 | **비교과** (영양교사 ≠ 영양사) |
| "체육 시간강사" (초등) | 초등담임 vs 방과후 | **초등담임** (4순위 > 6순위) |
| "체육강사" (방과후 맥락) | 방과후 vs 초등담임 | **방과후** (키워드 문맥) |
| "협력강사" | 초등담임 vs 행정 | **행정·교육지원** (수업보조) |

### 7.2 시간강사 분류 기준

| 조건 | 매핑 | 근거 |
|------|------|------|
| school_level='초등' + 시간강사 | **초등담임** | 정규수업 시간제 담당 |
| school_level='중등'/'고등' + 시간강사 | **교과과목** | 교과 시간제 (아르바이트) |
| 시간강사 + 방과후 키워드 | **방과후/돌봄** | 방과후 강사 |

### 7.3 "기타" 필터 비율

- v7 기준 ~4.7% (약 120건)
- 키워드 DB 점진적 확장으로 축소 가능

---

## 8. 사용자 시나리오 검증

| 사용자 | 1차 | 2차 | 3차 | 결과 |
|--------|-----|-----|-----|------|
| 초등 정교사 | 초등담임 | - | - | 초등 담임/전담/시간강사 공고 |
| 중등 영어교사 | 교과과목 | 영어 | 중학교 | 중학교 영어교사 + 영어 시간강사 |
| 보건교사 자격 | 비교과 | 보건 | - | 유/초/중/고 보건교사 공고 |
| 특수교육 자격 | 특수교육 | - | - | 모든 학교급 특수 공고 |
| 방과후 체육강사 | 방과후/돌봄 | 체육 | - | 체육/스포츠 방과후 공고 |
| 교무실무사 | 행정·교육지원 | 교무실무사 | - | 교무실무사 공고 |
| 유치원 담임교사 | 유치원 | 유치원담임 | - | 유치원 기간제 공고 |
| 유치원 방과후 | 유치원 | 유치원방과후 | - | 유치원 방과후/특성화 공고 |
| 방과후 요리강사 | 방과후/돌봄 | 요리 | - | 방과후 요리 공고 |
| 영양사 (공무직) | 행정·교육지원 | 영양사 | - | 영양사 공고 (교사 아님) |
| 학습 협력강사 | 행정·교육지원 | 학습튜터/협력강사 | - | 협력강사/튜터 공고 |
| 체육 시간강사 (초등) | 초등담임 | - | - | 초등 체육 시간강사 공고 |
| 체육 시간강사 (중등) | 교과과목 | 체육 | 중학교 | 중학교 체육 시간강사 공고 |

---

## 9. 확인 필요 사항

1. **"기타" 필터 이름**: "기타"로 할지, "전체보기"로 할지
2. **초등담임 2차 분류**: 담임/전담 구분 필요한지, 아니면 1차만으로 충분한지
3. **비교과 → 영양교사 vs 행정 → 영양사**: 현재 구분 로직 적절한지
4. **교과과목 3차 초등학교**: 초등 전담교사 + 시간강사 공고가 충분히 잡히는지
5. **협력강사**: 행정·교육지원으로 분류 적절한지 (수업보조 성격)

---

## 10. 구직자 마커 시스템 개선 계획 (v2)

> 작성일: 2026-01-29
> 상태: ✅ 사용자 컨펌 완료
> 목적: 학교 관리자가 **기존 필터바**로 구직자를 직관적으로 찾을 수 있도록 개선
> 핵심 원칙: 새 필터 만들지 않음 - 기존 필터바를 공고/구직자 양쪽에 적용

---

### 10.1 현재 문제점

| 문제 | 설명 |
|------|------|
| **색상 미구분** | 구직자 마커가 단일 색상(스카이블루)으로만 표시되어 카테고리 구분 불가 |
| **필터 연동 없음** | 하단 필터바가 공고에만 적용되고, 구직자 마커는 필터링 안됨 |
| **카테고리 불일치** | 구직 등록 모달의 "희망 학교급"이 공고 필터 카테고리와 맞지 않음 |
| **검색 비효율** | 학교 관리자가 "초등담임 구직자"만 보고 싶어도 전체 마커가 표시됨 |

---

### 10.2 개선 목표

```
학교 관리자가 필터바에서 "초등담임"을 클릭하면:
├─ 공고 마커: 초등담임 관련 공고만 표시 (기존)
└─ 구직자 마커: 초등담임 희망 구직자만 표시 (신규)
    └─ 마커 색상: 초등담임 필터 색상(녹색)과 동일
```

---

### 10.3 필터 카테고리 ↔ 구직자 마커 색상 매핑

| 1차 필터 | 필터바 색상 | 마커 색상 코드 | 대상 구직자 |
|---------|-----------|--------------|-----------|
| **유치원** | 🟠 Orange | `#F97316` | 유치원 정교사, 방과후 강사 |
| **초등담임** | 🟢 Green | `#22C55E` | 초등 정교사, 담임, 전담 |
| **교과과목** | 🔵 Teal | `#14B8A6` | 중등/고등 교과 교사 |
| **비교과** | 🟢 Emerald | `#10B981` | 보건/상담/사서/영양 교사 |
| **특수교육** | 🔴 Red | `#EF4444` | 특수교육 교사 |
| **방과후/돌봄** | ⚫ Gray | `#6B7280` | 방과후 강사, 돌봄 전담사 |
| **행정·교육지원** | ⚫ Gray | `#9CA3AF` | 실무사, 튜터, 협력강사 |
| **기타** | ⚫ Gray | `#D1D5DB` | 위 분류 외 |

---

### 10.4 구직 등록 모달 개선안 (확정)

#### 현재 구조 (문제점)
```
[닉네임] [이메일] [희망 학교급: 유치원/초등/중등/고등/특수]
[과목 선택] [경력] [활동 가능 지역] [자기소개]

문제: 학교급 기준이라 공고 필터 카테고리와 불일치
```

#### 개선 구조 (단일 스크롤 모달 - 확정)

> **Step 방식 폐기** → 하나의 모달에서 스크롤하며 입력

```
[위치 선택] ← 모달 열기 전에 전체화면 지도에서 선택 완료
├─ 주소 표시 + [변경] 버튼

[기본 정보]
├─ 닉네임 (필수) + [랜덤] 버튼
├─ 이메일 (필수)

[주력 분야] ★ 필수 (단일 선택만)
┌─────┐ ┌──────┐ ┌──────┐ ┌────┐ ┌──────┐ ┌────────┐ ┌─────────┐ ┌────┐
│유치원│ │초등담임│ │교과과목│ │비교과│ │특수교육│ │방과후/돌봄│ │행정·교육지원│ │기타│
└─────┘ └──────┘ └──────┘ └────┘ └──────┘ └────────┘ └─────────┘ └────┘

[세부 분야] (1차 선택에 따라 동적 표시)
├─ 유치원 → [유치원담임] [유치원방과후]
├─ 교과과목 → [국어] [영어] [수학] ... + 학교급 선택
├─ 비교과 → [보건] [상담] [사서] [영양교사]
├─ 방과후/돌봄 → [체육] [영어] [코딩] [논술] [미술] [돌봄] + [기타 및 추가입력]
│                ↳ "기타 및 추가입력" 클릭 시 자유 입력 가능
├─ 행정·교육지원 → [교무실무사] [조리실무사] [시설/환경] [학습튜터] ...
├─ 초등담임/특수교육/기타 → 2차 분류 없이 바로 추가 정보로

[추가 정보] (선택)
├─ [경력] [활동 가능 지역] [자기소개]

[등록하기] 버튼 → 완료 시 모달 닫힘 + 내 마커 즉시 표시

※ 자세한 아스키 목업: 10.12 참조
```

---

### 10.5 DB 스키마 변경안

#### teacher_markers 테이블 수정

```sql
-- 기존 컬럼
subjects TEXT[],              -- 과목 (복수)
school_levels TEXT[],         -- 학교급 (복수)

-- 신규 컬럼 추가
primary_category VARCHAR(50), -- 1차 분류 (유치원/초등담임/교과과목/비교과/특수교육/방과후돌봄/행정교육지원/기타)
sub_categories TEXT[],        -- 2차 분류 (복수 선택 가능)
preferred_school_levels TEXT[], -- 희망 학교급 (교과과목 선택 시)
```

#### 예시 데이터

| primary_category | sub_categories | preferred_school_levels | 마커 색상 |
|-----------------|----------------|------------------------|----------|
| 초등담임 | NULL | NULL | 🟢 Green |
| 교과과목 | ['영어', '국어'] | ['중학교', '고등학교'] | 🔵 Teal |
| 비교과 | ['보건'] | NULL | 🟢 Emerald |
| 방과후/돌봄 | ['체육', '음악'] | NULL | ⚫ Gray |

---

### 10.6 필터 연동 로직 (기존 필터바 재활용)

> **핵심**: 새 필터를 만들지 않고, 기존 필터바를 공고/구직자 양쪽에 적용

#### 10.6.1 필터바 클릭 시 동작

```typescript
// 필터바 클릭 시 - 레이어 토글 상태에 따라 분기
onFilterClick('초등담임') => {
  if (showJobLayer) {
    // 공고 필터링 (기존 동작 유지)
    filterJobPostings({ category: '초등담임' });
  }
  if (showSeekerLayer) {
    // 구직자 마커 필터링 (신규 추가)
    filterTeacherMarkers({ primary_category: '초등담임' });
  }
}

// 2차 필터 클릭 시 (교과과목 → 영어)
onSubFilterClick('교과과목', '영어') => {
  if (showJobLayer) {
    filterJobPostings({ category: '교과과목', subject: '영어' });
  }
  if (showSeekerLayer) {
    filterTeacherMarkers({
      primary_category: '교과과목',
      sub_categories: { contains: '영어' }
    });
  }
}
```

#### 10.6.2 마커 색상 결정 로직

```typescript
function getTeacherMarkerColor(marker: TeacherMarker): string {
  const colorMap = {
    '유치원': '#F97316',
    '초등담임': '#22C55E',
    '교과과목': '#14B8A6',
    '비교과': '#10B981',
    '특수교육': '#EF4444',
    '방과후/돌봄': '#6B7280',
    '행정·교육지원': '#9CA3AF',
    '기타': '#D1D5DB'
  };
  return colorMap[marker.primary_category] || '#68B2FF';
}
```

---

### 10.7 학교 관리자 관점 사용자 시나리오

| 시나리오 | 1차 필터 | 2차 필터 | 기대 결과 |
|---------|---------|---------|----------|
| "초등 담임교사 구함" | 초등담임 | - | 🟢 초등담임 희망 구직자만 표시 |
| "중학교 영어 시간강사 구함" | 교과과목 | 영어 → 중학교 | 🔵 영어+중학교 희망 구직자 표시 |
| "보건교사 구함" | 비교과 | 보건 | 🟢 보건교사 자격 구직자 표시 |
| "방과후 체육강사 구함" | 방과후/돌봄 | 체육 | ⚫ 체육 방과후 강사 구직자 표시 |
| "특수학급 교사 구함" | 특수교육 | - | 🔴 특수교육 자격 구직자 표시 |
| "교무실무사 구함" | 행정·교육지원 | 교무실무사 | ⚫ 교무실무사 희망 구직자 표시 |

---

### 10.8 UI 동작 목업 (레이어 토글 연동)

#### 10.8.1 "구직자만 보기" ON + 필터 미선택
```
┌───────────────────────────────────────────────────────────┐
│ 지도 (모든 구직자 마커 표시)                                │
│   🟢 초등담임A   🟠 유치원B   🔵 교과과목C   🔴 특수교육D   │
│   ⚫ 방과후E     🟢 비교과F   ⚫ 행정G       ⚫ 기타H       │
│                                                            │
│   ※ 공고 마커는 숨김                                       │
└───────────────────────────────────────────────────────────┘
┌───────────────────────────────────────────────────────────┐
│ [유치원] [초등담임] [교과과목] [비교과] [특수교육] ...       │
│ ← 동일한 필터바 (구직자 필터링에 사용)                      │
└───────────────────────────────────────────────────────────┘
```

#### 10.8.2 "구직자만 보기" ON + "초등담임" 필터 클릭
```
┌───────────────────────────────────────────────────────────┐
│ 지도 (초등담임 구직자만 표시)                               │
│   🟢 초등담임A   🟢 초등담임B   🟢 초등담임C               │
│                                                            │
│   ※ 다른 카테고리 구직자 + 모든 공고 숨김                  │
└───────────────────────────────────────────────────────────┘
┌───────────────────────────────────────────────────────────┐
│ [유치원] [●초등담임] [교과과목] [비교과] [특수교육] ...     │
└───────────────────────────────────────────────────────────┘
```

#### 10.8.3 "공고만 보기" ON + "초등담임" 필터 클릭 (기존 동작)
```
┌───────────────────────────────────────────────────────────┐
│ 지도 (초등담임 공고만 표시)                                 │
│   🔵 초등담임공고1   🔵 초등담임공고2   🔵 초등담임공고3   │
│                                                            │
│   ※ 모든 구직자 마커 + 다른 카테고리 공고 숨김             │
└───────────────────────────────────────────────────────────┘
┌───────────────────────────────────────────────────────────┐
│ [유치원] [●초등담임] [교과과목] [비교과] [특수교육] ...     │
└───────────────────────────────────────────────────────────┘
```

---

### 10.9 구현 단계

| 단계 | 작업 | 우선순위 |
|------|-----|---------|
| **1단계** | DB 스키마 변경 (primary_category, sub_categories 추가) | 높음 |
| **2단계** | 구직 등록 모달 UI 개선 (1차/2차 분류 선택) | 높음 |
| **3단계** | 마커 색상 로직 구현 (카테고리별 색상) | 높음 |
| **4단계** | 필터바 ↔ 구직자 마커 연동 | 높음 |
| **5단계** | 기존 데이터 마이그레이션 (school_levels → primary_category 변환) | 중간 |
| **6단계** | 구직자 상세 정보 팝업 개선 | 낮음 |

---

### 10.10 ✅ 확정된 설계 결정

| 항목 | 결정 | 설명 |
|------|------|------|
| **1차 분류 선택** | 단일 선택 | 구직자는 가장 주력 분야 **하나만** 선택 |
| **필터 미선택 시** | 전체 표시 | "구직자만 보기" 클릭 시 모든 구직자 마커 표시 |
| **경력 필터** | 불필요 | 지역 + 카테고리로 충분 (추후 필요시 추가) |
| **마커 클릭 정보** | 현재 유지 | 닉네임, 카테고리, 경력, 이메일, 자기소개 |
| **연락 방식** | 이메일만 | 추후 사이트 내 채팅/대화 기능 구현 예정 |
| **필터 구현** | 기존 필터 재사용 | 새 필터 만들지 않음 - **기존 필터바 그대로 활용** |

---

### 10.11 핵심 동작 원리

```
"구직자만 보기" 토글 ON 시:
├─ 지도: 구직자 마커만 표시 (공고 마커 숨김)
├─ 필터바: 동일하게 유지 (유치원/초등담임/교과과목/...)
└─ 필터 클릭: 해당 카테고리 구직자만 필터링

예시) "구직자만 보기" + "초등담임" 클릭:
└─ 지도에 초등담임 희망 구직자 마커만 표시 (녹색)
```

---

### 10.12 구직등록 모달 아스키 목업 (단일 스크롤 방식)

> **디자인 원칙**: anti-vibe-design 준수 (이모지 금지, 형광펜 금지, 프로젝트 컬러 사용)
> **UX 원칙**: Step 방식 금지 → 단일 모달에서 스크롤하며 입력

---

#### 10.12.0 등록 플로우 전체

```
[구직등록 버튼 클릭]
      │
      ▼
[전체화면 지도 피커] ← 사용자 현재 위치로 초기화
      │                위치 검색 또는 지도 드래그로 위치 선택
      │                "이 위치로 선택" 클릭
      ▼
[구직등록 모달] ← 선택한 위치 정보가 전달됨
      │           단일 스크롤 폼으로 모든 정보 입력
      │           "등록하기" 클릭
      ▼
[모달 자동 닫힘 + 내 마커 즉시 표시]
      │
      ▼
[지도에서 내 마커 확인] ← 카테고리별 색상 적용
                         "구직자만 보기" 누르지 않아도 표시됨
```

---

#### 10.12.1 구직등록 모달 - 단일 스크롤

```
┌──────────────────────────────────────────────────────────────────┐
│                        구직 등록                            [X]   │
├──────────────────────────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────────────────────┐ │
│ │                      스크롤 영역                              │ │
│ │                                                              │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │  희망 활동 위치 *                                            │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │  ┌────────────────────────────────────────────────────────┐  │ │
│ │  │  경기도 성남시 분당구 정자동                   [변경]    │  │ │
│ │  └────────────────────────────────────────────────────────┘  │ │
│ │                                                              │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │  기본 정보                                                   │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  닉네임 *                                          [랜덤]    │ │
│ │  ┌────────────────────────────────────────────────────────┐  │ │
│ │  │ 열정적인 펭귄                                          │  │ │
│ │  └────────────────────────────────────────────────────────┘  │ │
│ │                                                              │ │
│ │  이메일 * (연락용)                                           │ │
│ │  ┌────────────────────────────────────────────────────────┐  │ │
│ │  │ example@email.com                                      │  │ │
│ │  └────────────────────────────────────────────────────────┘  │ │
│ │  * 학교 담당자가 연락할 수 있는 이메일 주소입니다             │ │
│ │                                                              │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │  주력 분야 * (1개만 선택)                                    │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  ┌────────┐ ┌─────────┐ ┌─────────┐ ┌───────┐              │ │
│ │  │ 유치원  │ │ 초등담임 │ │ 교과과목 │ │ 비교과 │              │ │
│ │  └────────┘ └─────────┘ └─────────┘ └───────┘              │ │
│ │  ┌─────────┐ ┌───────────┐ ┌────────────┐ ┌──────┐        │ │
│ │  │ 특수교육 │ │ 방과후/돌봄 │ │ 행정·교육지원 │ │ 기타  │        │ │
│ │  └─────────┘ └───────────┘ └────────────┘ └──────┘        │ │
│ │                                                              │ │
│ │  * 선택한 분야에 맞는 색상으로 마커가 표시됩니다              │ │
│ │                                                              │ │
│ │  ══════════════════════════════════════════════════════════  │ │
│ │  ↓ 1차 분류 선택 시 아래 섹션이 동적으로 나타남 ↓            │ │
│ │  ══════════════════════════════════════════════════════════  │ │
│ │                                                              │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │  추가 정보 (선택)                                            │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  경력                                                        │ │
│ │  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │ │
│ │  │ 신입/1년  │ │  1~3년   │ │  3~5년   │ │ 5년 이상  │       │ │
│ │  │   미만   │ │          │ │          │ │          │       │ │
│ │  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │ │
│ │                                                              │ │
│ │  활동 가능 지역 (복수 선택 가능)                              │ │
│ │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐    │ │
│ │  │ 서울  │ │ 경기  │ │ 인천  │ │ 부산  │ │ 대구  │ │ 광주  │    │ │
│ │  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘    │ │
│ │  ...                                                        │ │
│ │                                                              │ │
│ │  자기소개                                                    │ │
│ │  ┌────────────────────────────────────────────────────────┐  │ │
│ │  │                                                        │  │ │
│ │  │ 간단한 경력 및 강점을 적어주세요 (최대 500자)           │  │ │
│ │  │                                                        │  │ │
│ │  └────────────────────────────────────────────────────────┘  │ │
│ │                                                     0/500   │ │
│ │                                                              │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │  개인정보 동의 *                                             │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  ┌────────────────────────────────────────────────────────┐  │ │
│ │  │  실제 구인구직이 되기 위한 정말 최소한의 정보만          │  │ │
│ │  │  받고 있습니다.                                         │  │ │
│ │  │                                                        │  │ │
│ │  │  [ ] 현재 등록한 내용에 대한 개인정보이용과             │  │ │
│ │  │      서비스 내 노출에 동의합니다.                       │  │ │
│ │  └────────────────────────────────────────────────────────┘  │ │
│ │                                                              │ │
│ └──────────────────────────────────────────────────────────────┘ │
├──────────────────────────────────────────────────────────────────┤
│                                                                   │
│  ┌────────────────────────────────────────────────────────────┐  │
│  │                         등록하기                            │  │
│  └────────────────────────────────────────────────────────────┘  │
│  * 동의 체크 필수 - 미체크 시 버튼 비활성화                       │
│                                                                   │
└──────────────────────────────────────────────────────────────────┘
```

---

#### 10.12.2 동적 섹션 - 방과후/돌봄 선택 시

> **필터바 기반 6대 분류** + "기타 및 추가입력"

```
│ │  ────────────────────────────────────────────────────────    │ │
│ │  세부 분야 (복수 선택 가능)                                   │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  선택: 방과후/돌봄                                           │ │
│ │                                                              │ │
│ │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐    │ │
│ │  │ 체육  │ │ 영어  │ │ 코딩  │ │ 논술  │ │ 미술  │ │ 돌봄  │    │ │
│ │  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘    │ │
│ │                                                              │ │
│ │  ┌─────────────────┐                                        │ │
│ │  │ + 기타 및 추가입력 │ ← 클릭 시 아래 입력창 표시             │ │
│ │  └─────────────────┘                                        │ │
│ │                                                              │ │
│ │  ┌────────────────────────────────────────────────────────┐  │ │
│ │  │ 예) 피아노, 바이올린, 서예, 로봇공학 ...                │  │ │
│ │  └────────────────────────────────────────────────────────┘  │ │
│ │  * 대분류 6개 외 추가 분야를 직접 입력하세요                  │ │
```

---

#### 10.12.3 동적 섹션 - 교과과목 선택 시

```
│ │  ────────────────────────────────────────────────────────    │ │
│ │  세부 분야                                                   │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  선택: 교과과목                                              │ │
│ │                                                              │ │
│ │  과목 선택 (복수 가능)                                       │ │
│ │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐    │ │
│ │  │ 국어  │ │ 영어  │ │ 수학  │ │ 과학  │ │ 사회  │ │ 체육  │    │ │
│ │  └──────┘ └──────┘ └──────┘ └──────┘ └──────┘ └──────┘    │ │
│ │  ┌──────┐ ┌──────┐ ┌──────┐ ┌───────┐ ┌──────┐            │ │
│ │  │ 음악  │ │ 미술  │ │ 정보  │ │기술가정│ │ 기타  │            │ │
│ │  └──────┘ └──────┘ └──────┘ └───────┘ └──────┘            │ │
│ │                                                              │ │
│ │  희망 학교급 (복수 가능)                                     │ │
│ │  ┌─────────┐  ┌────────┐  ┌─────────┐                      │ │
│ │  │ 초등학교  │  │ 중학교  │  │ 고등학교  │                      │ │
│ │  └─────────┘  └────────┘  └─────────┘                      │ │
```

---

#### 10.12.4 동적 섹션 - 유치원 선택 시

```
│ │  ────────────────────────────────────────────────────────    │ │
│ │  세부 분야 (선택)                                            │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  선택: 유치원                                                │ │
│ │                                                              │ │
│ │  ┌───────────┐  ┌─────────────┐                             │ │
│ │  │ 유치원담임  │  │ 유치원방과후  │                             │ │
│ │  └───────────┘  └─────────────┘                             │ │
```

---

#### 10.12.5 동적 섹션 - 비교과 선택 시

```
│ │  ────────────────────────────────────────────────────────    │ │
│ │  세부 분야 (복수 가능)                                       │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  선택: 비교과                                                │ │
│ │                                                              │ │
│ │  ┌──────┐  ┌──────┐  ┌──────┐  ┌─────────┐                 │ │
│ │  │ 보건  │  │ 상담  │  │ 사서  │  │ 영양교사 │                 │ │
│ │  └──────┘  └──────┘  └──────┘  └─────────┘                 │ │
```

---

#### 10.12.6 동적 섹션 - 행정·교육지원 선택 시

```
│ │  ────────────────────────────────────────────────────────    │ │
│ │  세부 분야 (복수 가능)                                       │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  선택: 행정·교육지원                                         │ │
│ │                                                              │ │
│ │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌───────┐             │ │
│ │  │ 교무실무사│ │ 조리실무사│ │ 시설/환경 │ │ 영양사 │             │ │
│ │  └─────────┘ └─────────┘ └─────────┘ └───────┘             │ │
│ │  ┌────────────────┐ ┌──────────┐ ┌───────────┐             │ │
│ │  │ 학습튜터/협력강사 │ │ 자원봉사  │ │ 안전지킴이  │             │ │
│ │  └────────────────┘ └──────────┘ └───────────┘             │ │
```

---

#### 10.12.7 동적 섹션 - 초등담임/특수교육/기타 선택 시

```
│ │  ────────────────────────────────────────────────────────    │ │
│ │  세부 분야                                                   │ │
│ │  ────────────────────────────────────────────────────────    │ │
│ │                                                              │ │
│ │  선택: 초등담임                                              │ │
│ │                                                              │ │
│ │  ┌────────────────────────────────────────────────────────┐  │ │
│ │  │  2차 분류 없음 - 담임/전담/시간강사 공고에 노출됩니다     │  │ │
│ │  └────────────────────────────────────────────────────────┘  │ │
│ │                                                              │ │
│ │  (바로 "추가 정보" 섹션으로 연결)                             │ │
```

---

#### 10.12.8 등록 완료 후 즉시 확인 UX

```
[등록 완료 시 동작]

1. 모달 자동 닫힘
2. 토스트 메시지: "구직 마커가 등록되었습니다!"
3. 지도에서 내 마커 즉시 표시:
   ├─ 카테고리별 색상 적용 (초등담임=녹색, 교과과목=틸 등)
   ├─ 내 마커에 포커스 (지도 중심 이동)
   └─ "구직자만 보기" 누르지 않아도 내 마커는 항상 표시

┌──────────────────────────────────────────────────────────────────┐
│ 지도                                                              │
│                                                                   │
│        [공고]  [공고]                                             │
│                    ★ ← 내가 방금 등록한 마커 (강조 표시)           │
│                       (카테고리 색상 적용)                        │
│        [공고]                                                     │
│                                                                   │
│   ※ 내 마커는 레이어 토글과 무관하게 항상 표시                     │
│   ※ 등록 직후 지도가 내 마커 위치로 이동                          │
└──────────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────────┐
│  구직 마커가 등록되었습니다!                                      │ ← 토스트
└──────────────────────────────────────────────────────────────────┘
```

---

### 10.13 필터바 동작 상세 (기존 필터 재활용)

#### 10.13.1 "공고만 보기" ON 상태 (기존 동작)

```
┌────────────────────────────────────────────┐
│ 지도: 공고 마커만 표시                        │
├────────────────────────────────────────────┤
│ 필터바 클릭 → 해당 카테고리 공고만 필터링      │
└────────────────────────────────────────────┘
```

#### 10.13.2 "구직자만 보기" ON 상태 (신규 동작)

```
┌────────────────────────────────────────────┐
│ 지도: 구직자 마커만 표시                      │
├────────────────────────────────────────────┤
│ 필터바 클릭 → 해당 카테고리 구직자만 필터링    │
│                                             │
│ 예) "초등담임" 클릭:                         │
│ └─ primary_category='초등담임' 구직자만 표시  │
│ └─ 마커 색상: 녹색 (🟢)                      │
└────────────────────────────────────────────┘
```

#### 10.13.3 둘 다 OFF 상태

```
┌────────────────────────────────────────────┐
│ 지도: 공고 + 구직자 마커 모두 표시            │
├────────────────────────────────────────────┤
│ 필터바 클릭 → 공고 & 구직자 동시에 필터링     │
└────────────────────────────────────────────┘
```

---

### 10.14 위치 선택 플로우 상세

> **Q: 스샷1의 "스크롤 영역" + "희망 활동 위치" UI 의도는?**
> **A: 사용자가 이미 선택한 위치를 확인하고, 필요시 변경할 수 있게 하는 것**

#### 10.14.1 전체 플로우

```
1. [구직등록 버튼 클릭]
   └─ 전체화면 지도 피커 열림 (FullScreenLocationPicker)
   └─ 사용자 현재 위치로 자동 초기화

2. [지도에서 위치 선택]
   └─ 지도 드래그 또는 검색으로 원하는 위치로 이동
   └─ 중앙 핀 아이콘이 선택 위치 표시
   └─ "이 위치로 선택" 버튼 클릭

3. [구직등록 모달 열림]
   └─ 선택한 좌표 + 주소가 모달로 전달됨
   └─ 모달 상단에 "경기도 성남시 분당구 정자동 [변경]" 표시
   └─ [변경] 클릭 시 다시 지도 피커로 이동

4. [모달에서 정보 입력]
   └─ 단일 스크롤 폼으로 모든 정보 입력
   └─ "등록하기" 버튼 클릭

5. [등록 완료]
   └─ 모달 자동 닫힘
   └─ 토스트: "구직 마커가 등록되었습니다!"
   └─ 내 마커가 지도에 즉시 표시 (카테고리별 색상)
```

#### 10.14.2 위치 표시 UI

```
기존 문제:
┌──────────────────────────────────────┐
│  "지도에서 희망 위치 표시됨"          │ ← 이모지 사용 + 모호한 표현
│  "(클릭으로 변경 가능)"               │
└──────────────────────────────────────┘

개선안:
┌──────────────────────────────────────┐
│  경기도 성남시 분당구 정자동   [변경]  │ ← 명확한 주소 + 간단한 변경 버튼
└──────────────────────────────────────┘
```

---

### 10.15 등록 완료 후 마커 표시 규칙 (핵심)

> **"등록 버튼을 눌렀을 때 자기가 등록한게 바로 직관적으로 확인되어야 함"**

#### 10.15.1 즉시 확인 가능한 UX

| 동작 | 설명 |
|------|------|
| **모달 자동 닫힘** | 등록 완료 시 모달이 자동으로 닫힘 |
| **토스트 표시** | "구직 마커가 등록되었습니다!" 메시지 |
| **지도 이동** | 내 마커 위치로 지도 중심 자동 이동 |
| **마커 즉시 표시** | "구직자만 보기" 누르지 않아도 내 마커 표시 |
| **마커 강조** | 등록 직후 내 마커에 강조 효과 (펄스 애니메이션 등) |

#### 10.15.2 마커 색상 자동 적용

```
등록 시 선택한 1차 분류에 따라 마커 색상 자동 결정:

├─ 유치원       → #F97316 (Orange)
├─ 초등담임     → #22C55E (Green)
├─ 교과과목     → #14B8A6 (Teal)
├─ 비교과       → #10B981 (Emerald)
├─ 특수교육     → #EF4444 (Red)
├─ 방과후/돌봄  → #6B7280 (Gray)
├─ 행정·교육지원 → #9CA3AF (Gray)
└─ 기타         → #D1D5DB (Light Gray)
```

#### 10.15.3 내 마커 특별 처리

```
[일반 규칙]
- "공고만 보기" ON: 공고 마커만 표시
- "구직자만 보기" ON: 구직자 마커만 표시
- 둘 다 OFF: 공고 + 구직자 모두 표시

[내 마커 예외]
- 내가 등록한 마커는 레이어 토글과 무관하게 항상 표시
- 다른 구직자는 숨겨도 내 마커는 항상 보임
- 내 마커 클릭 시 수정/삭제 옵션 제공
```

---

### 10.16 방과후/돌봄 세부 분류 체계

> **필터바 기준 6대 분류** + **"기타 및 추가입력"**

#### 10.16.1 기본 6대 분류 (필터바 연동)

| 분류 | 대상 | 필터바 표시 |
|------|------|-----------|
| **체육** | 체육, 스포츠, 축구, 농구, 수영 등 | 체육 |
| **영어** | 영어, 외국어 | 영어 |
| **코딩** | 코딩, 로봇, STEM, 정보 | 코딩 |
| **논술** | 논술, 독서, 글쓰기 | 논술 |
| **미술** | 미술, 공예, 디자인 | 미술 |
| **돌봄** | 돌봄, 늘봄, 에듀케어 | 돌봄 |

#### 10.16.2 "기타 및 추가입력"

```
[기타 및 추가입력] 클릭 시:
├─ 텍스트 입력창 표시
├─ 예시 플레이스홀더: "예) 피아노, 바이올린, 서예, 로봇공학..."
└─ 6대 분류에 없는 분야를 자유롭게 입력 가능

사용 예시:
├─ 미술 선택 + "수채화, 캘리그라피" 추가 입력
├─ 기타만 선택 + "바이올린, 첼로" 입력
└─ 코딩 선택 + "드론, 3D프린팅" 추가 입력
```

---

### 10.17 "기타 및 추가입력" 필터 검색 연동

> **핵심 질문**: 사용자가 "기타 및 추가입력"에 자유 입력한 경우, 필터에서 어떻게 검색되나?
> **원칙**: 백엔드와 연동하여 실제 필터바 클릭 시에도 반영되어야 함

---

#### 10.17.1 DB 저장 구조

```sql
-- teacher_markers 테이블
CREATE TABLE teacher_markers (
  ...
  primary_category VARCHAR(50),   -- '방과후/돌봄' (1차 분류)
  sub_categories TEXT[],          -- ['체육', '미술'] (6대 분류 선택값)
  other_subject VARCHAR(200),     -- '피아노, 바이올린, 서예' (자유 입력값)
  ...
);
```

**저장 예시:**

| 사용자 | primary_category | sub_categories | other_subject |
|--------|-----------------|----------------|---------------|
| A강사 | 방과후/돌봄 | ['체육'] | NULL |
| B강사 | 방과후/돌봄 | ['미술'] | '수채화, 캘리그라피' |
| C강사 | 방과후/돌봄 | [] | '피아노, 바이올린' |
| D강사 | 방과후/돌봄 | ['코딩', '체육'] | '드론, 3D프린팅' |

---

#### 10.17.2 필터바 동작 로직

##### Case 1: "방과후/돌봄" 1차 필터 클릭

```
[필터바: 방과후/돌봄 클릭]
     │
     ▼
[백엔드 쿼리]
WHERE primary_category = '방과후/돌봄'
     │
     ▼
[결과]
├─ A강사 (체육)
├─ B강사 (미술 + 수채화,캘리그라피)
├─ C강사 (피아노,바이올린)        ← "기타 및 추가입력"만 한 사용자도 포함
└─ D강사 (코딩,체육 + 드론,3D프린팅)
```

**핵심**: `primary_category = '방과후/돌봄'`이면 **무조건 포함**
- 6대 분류만 선택한 사용자
- "기타 및 추가입력"만 한 사용자
- 6대 분류 + "기타 및 추가입력" 둘 다 한 사용자

##### Case 2: "방과후/돌봄 → 체육" 2차 필터 클릭

```
[필터바: 방과후/돌봄 → 체육 클릭]
     │
     ▼
[백엔드 쿼리]
WHERE primary_category = '방과후/돌봄'
  AND '체육' = ANY(sub_categories)
     │
     ▼
[결과]
├─ A강사 (체육)
└─ D강사 (코딩,체육 + 드론,3D프린팅)
```

##### Case 3: 텍스트 검색 (검색창 사용)

```
[검색창: "피아노" 입력]
     │
     ▼
[백엔드 쿼리]
WHERE (
  '피아노' = ANY(sub_categories)
  OR other_subject ILIKE '%피아노%'
)
     │
     ▼
[결과]
└─ C강사 (피아노,바이올린)
```

---

#### 10.17.3 SQL 쿼리 상세

```sql
-- 1. "방과후/돌봄" 1차 필터: 모든 방과후/돌봄 구직자
SELECT * FROM teacher_markers
WHERE primary_category = '방과후/돌봄'
  AND is_active = true;

-- 2. "방과후/돌봄 → 체육" 2차 필터: 체육 분야 구직자
SELECT * FROM teacher_markers
WHERE primary_category = '방과후/돌봄'
  AND '체육' = ANY(sub_categories)
  AND is_active = true;

-- 3. 텍스트 검색: "피아노" 키워드 검색
SELECT * FROM teacher_markers
WHERE primary_category = '방과후/돌봄'
  AND (
    '피아노' = ANY(sub_categories)
    OR other_subject ILIKE '%피아노%'
  )
  AND is_active = true;

-- 4. 통합 검색: 6대 분류 + 자유입력 동시 검색
SELECT * FROM teacher_markers
WHERE primary_category = '방과후/돌봄'
  AND (
    sub_categories && ARRAY['체육', '미술']  -- 6대 분류 중 하나라도 포함
    OR other_subject ILIKE '%검색어%'         -- 또는 자유입력에 검색어 포함
  )
  AND is_active = true;
```

---

#### 10.17.4 프론트엔드 필터 연동 로직

```typescript
// 필터 상태 타입
interface SeekerFilter {
  primaryCategory: string | null;        // '방과후/돌봄'
  subCategories: string[];               // ['체육', '미술']
  searchKeyword: string | null;          // '피아노'
}

// 필터 적용 함수
async function filterTeacherMarkers(filter: SeekerFilter) {
  let query = supabase
    .from('teacher_markers')
    .select('*')
    .eq('is_active', true);

  // 1차 필터 적용
  if (filter.primaryCategory) {
    query = query.eq('primary_category', filter.primaryCategory);
  }

  // 2차 필터 적용 (6대 분류)
  if (filter.subCategories.length > 0) {
    query = query.overlaps('sub_categories', filter.subCategories);
  }

  // 텍스트 검색 적용 (자유입력 검색)
  if (filter.searchKeyword) {
    query = query.or(
      `sub_categories.cs.{${filter.searchKeyword}},` +
      `other_subject.ilike.%${filter.searchKeyword}%`
    );
  }

  return query;
}
```

---

#### 10.17.5 UI 플로우 (필터 검색)

```
[학교 관리자 시나리오: "피아노 강사 찾기"]

1. 필터바에서 "방과후/돌봄" 클릭
   └─ 모든 방과후/돌봄 구직자 표시 (6대 분류 + 기타 입력 포함)

2. 검색창에 "피아노" 입력
   └─ other_subject에 "피아노"가 포함된 구직자만 필터링

3. 결과: C강사 (피아노, 바이올린) 마커만 지도에 표시

────────────────────────────────────────────────────────

[다른 시나리오: "체육 강사 찾기"]

1. 필터바에서 "방과후/돌봄" 클릭
2. 2차 필터에서 "체육" 클릭
   └─ sub_categories에 '체육'이 포함된 구직자만 표시
   └─ other_subject에만 입력한 사용자는 제외

3. 결과: A강사, D강사 마커만 지도에 표시
```

---

#### 10.17.6 핵심 동작 요약

| 필터 조건 | 쿼리 로직 | 대상 사용자 |
|----------|----------|-----------|
| 방과후/돌봄 (1차만) | `primary_category = '방과후/돌봄'` | 모든 방과후/돌봄 구직자 |
| 방과후/돌봄 → 체육 | `+ '체육' = ANY(sub_categories)` | 체육 분류 선택한 구직자 |
| 방과후/돌봄 + 키워드 | `+ other_subject ILIKE '%키워드%'` | 자유입력에 키워드 포함된 구직자 |

**중요 원칙:**
1. **1차 필터만 클릭 시** → `other_subject`만 입력한 사용자도 반드시 포함
2. **2차 필터(6대 분류) 클릭 시** → 해당 분류 선택한 사용자만 필터링
3. **키워드 검색 시** → `sub_categories`와 `other_subject` 모두에서 검색

---

### 10.18 추후 로드맵

| 단계 | 기능 | 상태 |
|------|------|------|
| **현재** | 이메일 연락 방식 | 구현 예정 |
| **추후** | 사이트 내 채팅/대화 기능 | 계획 중 |
| **추후** | 관심 표시 기능 (양방향) | 검토 중 |

---

*작성: Claude Code*
*최종 수정: 2026-01-29*
*DB 조회 기준: 2026-01-28*
*사용자 컨펌: 2026-01-29*
*디자인 원칙: anti-vibe-design 준수*
