# 크롤링 현황 대시보드 개선 플랜

## 현재 문제점 (바이브코딩 냄새)

1. **과도한 컬러 사용**: 빨강, 초록, 노랑, 주황 배경색 남발
2. **정보 밀도 낮음**: 카드 하나당 정보량 적은데 공간 많이 차지
3. **강조 과다**: 모든 것을 강조하려다 아무것도 강조 안됨
4. **스크롤 필요**: 17개 지역 보려면 계속 스크롤해야 함
5. **액션 불명확**: 뭘 먼저 해야하는지 직관적이지 않음

---

## 개선 방향 (안티바이브 원칙)

- 흑백 기반, 컬러는 상태 표시용 아이콘만
- 배경색/박스 제거, 여백과 선으로 구분
- 정보 밀도 높여 한눈에 파악
- 타이포그래피로 위계 표현
- 액션 지향: 긴급한 것부터 표시

---

## 구조: 2단계 레이아웃

### 1단계: 담당자별 요약 (접힌 상태에서 바로 보임)

```
┌─────────────────────────────────────────────────────────────────────────┐
│ 크롤러 현황                                                             │
│                                                                         │
│ ● 11 긴급   ○ 3 정상   ⚠ 3 오류                 마지막 점검: 방금 전   │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│ 김성균 (4개 지역)                                           1긴급 2정상 │
│ ┌────────┬────────┬────────┬────────┐                                  │
│ │ 서울   │ 인천   │ 세종   │ 경기   │                                  │
│ │   ⚠    │   ●    │   ○    │   ○    │                                  │
│ └────────┴────────┴────────┴────────┘                                  │
│                                                                         │
│ 최선결 (6개 지역)                                           4긴급 2오류 │
│ ┌────────┬────────┬────────┬────────┬────────┬────────┐                │
│ │ 부산   │ 대구   │ 대전   │ 울산   │ 경북   │ 경남   │                │
│ │   ⚠    │   ●    │   ●    │   ⚠    │   ●    │   ●    │                │
│ └────────┴────────┴────────┴────────┴────────┴────────┘                │
│                                                                         │
│ 이진혁 (7개 지역)                                           6긴급 1정상 │
│ ┌────────┬────────┬────────┬────────┬────────┬────────┬────────┐       │
│ │ 광주   │ 충북   │ 충남   │ 전북   │ 전남   │ 경북   │ 제주   │       │
│ │   ○    │   ●    │   ●    │   ●    │   ●    │   ●    │   ●    │       │
│ └────────┴────────┴────────┴────────┴────────┴────────┴────────┘       │
│                                                                         │
│                              [ 전체 점검 ]   [ 긴급만 점검 ]            │
└─────────────────────────────────────────────────────────────────────────┘

범례: ● 긴급 (빨강)  ⚠ 오류 (노랑)  ○ 정상 (회색/초록)
```

**특징:**
- 담당자별로 그룹핑하여 책임 영역 명확
- 각 지역은 작은 박스로 상태 아이콘만 표시
- 담당자 옆에 요약 (몇개 긴급, 몇개 정상)
- 지역 클릭하면 2단계로 확장

---

### 2단계: 지역 상세 (클릭시 확장)

지역 박스 클릭하면 해당 지역 상세 정보가 아래에 펼쳐짐:

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│ 인천 상세                                                      [ 닫기 ]│
│ ─────────────────────────────────────────────────────────────────────── │
│                                                                         │
│ 상태: ● 긴급 - 9일간 미수집                                            │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │  원본 사이트    DB 보유     매칭      수집률     최근 수집          │ │
│ │     18건         50건       3건        17%        9일 전            │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ 담당: 김성균                                                            │
│ 게시판: https://www.ice.go.kr/...                            [ 열기 ↗ ]│
│                                                                         │
│ AI 진단: 인천 지역 크롤러가 9일간 작동하지 않았습니다.                  │
│          즉시 확인이 필요합니다.                                        │
│                                                                         │
│ 누락 공고 (15건 중 5건 표시):                                          │
│ ─────────────────────────────────────────────────────────────────────── │
│ · 2025년 인천교육청 기간제교사 채용 공고                               │
│ · 인천시교육청 교육공무직원 채용 안내                                   │
│ · 2025학년도 1학기 강사 모집                                           │
│ · 인천 OO고등학교 행정실무사 채용                                       │
│ · 특수교육실무사 채용 공고                                              │
│                                      [ 전체 누락 공고 보기 ]            │
│                                                                         │
│                                            [ 이 지역만 점검 ]           │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 컴포넌트 구조

```
CrawlerHealthSection (메인 컨테이너)
├── Header
│   ├── 제목 "크롤러 현황"
│   ├── 요약 배지 (긴급/정상/오류 개수)
│   └── 마지막 점검 시간
│
├── AssigneeGroup (담당자별 그룹) × 3
│   ├── AssigneeHeader
│   │   ├── 담당자명
│   │   ├── 지역 개수
│   │   └── 상태 요약 (n긴급 n정상)
│   │
│   └── RegionGrid (지역 그리드)
│       └── RegionChip (지역 칩) × n
│           ├── 지역명 (2글자)
│           └── 상태 아이콘
│
├── RegionDetail (선택된 지역 상세) - 조건부 렌더링
│   ├── 상태 요약
│   ├── 통계 테이블 (원본/DB/매칭/수집률/최근수집)
│   ├── 담당자 & 게시판 링크
│   ├── AI 진단 메시지
│   ├── 누락 공고 목록
│   └── 액션 버튼
│
└── ActionBar
    ├── [ 전체 점검 ] 버튼
    └── [ 긴급만 점검 ] 버튼
```

---

## 스타일 가이드

### 컬러 (최소한만 사용)

```css
/* 배경 */
--bg-primary: #ffffff;
--bg-secondary: #fafafa;

/* 텍스트 */
--text-primary: #1a1a1a;
--text-secondary: #6b7280;
--text-muted: #9ca3af;

/* 상태 - 아이콘/텍스트에만 사용, 배경색 금지 */
--status-critical: #dc2626;  /* 빨강 - 긴급 */
--status-warning: #f59e0b;   /* 노랑 - 오류/주의 */
--status-success: #10b981;   /* 초록 - 정상 */
--status-inactive: #9ca3af;  /* 회색 - 비활성 */

/* 보더 */
--border-light: #e5e7eb;
--border-dark: #d1d5db;
```

### 타이포그래피

```css
/* 제목 */
.section-title { font-size: 16px; font-weight: 600; color: var(--text-primary); }

/* 담당자명 */
.assignee-name { font-size: 14px; font-weight: 500; color: var(--text-primary); }

/* 지역명 */
.region-name { font-size: 12px; font-weight: 500; color: var(--text-primary); }

/* 보조 텍스트 */
.helper-text { font-size: 12px; color: var(--text-secondary); }

/* 숫자/통계 */
.stat-value { font-size: 14px; font-weight: 600; font-variant-numeric: tabular-nums; }
```

### 간격

```css
/* 섹션 간격 */
--spacing-section: 24px;

/* 그룹 간격 */
--spacing-group: 16px;

/* 아이템 간격 */
--spacing-item: 8px;

/* 칩 간격 */
--spacing-chip: 4px;
```

---

## 상태 판정 로직

```typescript
type HealthStatus = 'critical' | 'warning' | 'success' | 'inactive' | 'error';

function getHealthStatus(result: HealthResult): HealthStatus {
  // 점검 실패
  if (result.error) return 'error';

  // 비활성 (원본도 없고 DB도 없음)
  if (result.originalCount === 0 && result.dbCount === 0) return 'inactive';

  // 긴급: 7일 이상 미수집 OR 수집률 50% 미만
  if (result.daysSinceCrawl >= 7 || result.collectionRate < 50) return 'critical';

  // 주의: 3일 이상 미수집 OR 수집률 80% 미만
  if (result.daysSinceCrawl >= 3 || result.collectionRate < 80) return 'warning';

  // 정상
  return 'success';
}
```

---

## 담당자 매핑

```typescript
const ASSIGNEE_REGIONS = {
  '김성균': ['seoul', 'incheon', 'sejong', 'gyeonggi', 'gangwon'],
  '최선결': ['busan', 'daegu', 'daejeon', 'ulsan', 'gyeongbuk', 'gyeongnam'],
  '이진혁': ['gwangju', 'chungbuk', 'chungnam', 'jeonbuk', 'jeonnam', 'jeju'],
};
```

---

## 구현 우선순위

### Phase 1: 기본 레이아웃 변경
1. 기존 카드 레이아웃 제거
2. 담당자별 그룹 레이아웃 구현
3. 지역 칩 컴포넌트 구현
4. 상태 아이콘만 표시

### Phase 2: 상세 패널 구현
1. 지역 클릭시 상세 패널 토글
2. 통계 테이블 구현
3. 누락 공고 목록 구현
4. 애니메이션 추가 (slide down)

### Phase 3: 스타일 정리
1. 컬러 변수 통일
2. 배경색 제거, 보더/여백으로 대체
3. 타이포그래피 정리
4. 반응형 처리

---

## 예상 결과

### Before (현재)
- 17개 카드가 세로로 나열
- 각 카드에 배경색, 아이콘 과다
- 스크롤 많이 필요
- 누가 담당인지 찾아봐야 함

### After (개선)
- 담당자 3명 기준으로 3개 그룹
- 각 지역은 작은 칩으로 상태만 표시
- 한 화면에 전체 파악 가능
- 클릭하면 상세 정보 확장
- 깔끔한 흑백 기반, 상태 색만 포인트
