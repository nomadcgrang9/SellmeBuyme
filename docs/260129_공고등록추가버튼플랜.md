# 공고등록 기능 추가 계획

> 작성일: 2026-01-29
> 목적: 학교 담당자가 직접 공고를 등록하여 크롤링 공고와 동일하게 지도에 표시
> 최종 업데이트: 2026-01-29 (피드백 반영)

---

## 1. 현황 분석

### 기존 인프라 (활용 가능)
- **job_postings 테이블**: `source` 필드로 `'crawled'` vs `'user_posted'` 구분 가능
- **좌표 필드**: `latitude`, `longitude` 이미 존재
- **만료 관리**: `deadline` DATE 필드 + `is_urgent` 플래그 존재
- **마커 시스템**: 학교급별 색상, D-day 표시, 긴급 펄스 링 구현됨
- **분류 체계**: 8개 1차 분류 + 2차 분류 시스템 (teacher_markers 기반)
- **구직등록 UX**: 지도 클릭 → 단일 스크롤 모달 (참조)

### 현재 우측 플로팅바 구조 (LayerToggleBar)
```
┌──────────────┐
│    로그인    │
│══════════════│
│   공고만     │
│     보기     │
│──────────────│
│   구직자만   │
│     보기     │
│══════════════│
│  ＋ 구직등록 │  ← 기존
│──────────────│
│  + 공고등록  │  ← 신규 추가
└──────────────┘
```

---

## 2. 사용자 시나리오 (학교 담당자 관점)

### 시나리오 A: 처음 방문한 학교 담당자

```
1. 셀미바이미 접속 → 지도에 여러 공고 마커 확인
2. 우측 플로팅바 "공고등록" 버튼 클릭
3. 로그인 필요 → 구글 로그인 진행
4. 로그인 완료 → 지도 전체화면 (위치 선택 모드)
5. 학교 위치 클릭 → 공고등록 모달 오픈 (스크롤형 단일 화면)
6. 한 화면에서 모든 정보 입력 (스크롤)
7. "등록하기" 클릭 → 지도에 마커 즉시 표시!
```

### 시나리오 B: 기존 사용자 (수정/삭제)

```
1. 로그인 상태로 접속
2. 지도에서 내가 등록한 공고 마커 클릭
3. 상세 팝업에 "내가 등록한 공고" 표시 + 수정/삭제 버튼 노출
4. [수정하기] → 공고등록 모달 (기존 데이터 채워진 상태)
5. [삭제하기] → 확인 모달 → 삭제 완료 → 마커 즉시 제거
```

### 시나리오 C: 모집 마감 후

```
1. 마감일 자정 → deadline 기반 자동 필터링 (쿼리 조건)
2. 지도에서 마커 자동 숨김 (다른 크롤링 공고와 동일)
3. 본인은 만료된 공고도 조회 가능 (재등록용)
```

---

## 3. UI 목업 (ASCII)

### 3-1. 공고등록 버튼 위치 (LayerToggleBar)

```
┌──────────────┐
│  [L] 로그인  │  ← 프로필 아이콘 (로그인 시)
│══════════════│
│   공고만     │
│     보기     │
│──────────────│
│   구직자만   │
│     보기     │
│══════════════│
│  + 구직등록  │  ← 기존
│──────────────│
│  + 공고등록  │  ← 신규 추가
└──────────────┘
```

### 3-2. 공고등록 흐름 (구직등록과 동일)

```
[공고등록 버튼 클릭]
        ↓
┌─────────────────────────────────────────────────────────────────┐
│                    지도 전체화면                                 │
│                                                                  │
│    "학교/기관 위치를 클릭해주세요"                               │
│                                                                  │
│                        [*] (클릭 포인트)                         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
        ↓
    [위치 클릭]
        ↓
    공고등록 모달 자동 오픈
```

### 3-3. 공고등록 모달 (단일 스크롤 화면) - 구직등록과 동일한 UX

```
┌─────────────────────────────────────────────────────────────────┐
│  ● 공고 등록                                            ✕     │  ← 글래스모피즘 헤더
│  ─────────────────────────────────────────────────────────────  │
│                                                                  │
│  ┌─────────────────── 스크롤 영역 ───────────────────────────┐  │
│  │                                                            │  │
│  │  ═══════════════ 위치 정보 ═══════════════                │  │
│  │  위치 *                                                    │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ 경기도 성남시 분당구 이매동 산 61               [변경]│    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │                                                            │  │
│  │  ═══════════════ 기본 정보 ═══════════════                │  │
│  │  학교/기관명 *                                             │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ OO초등학교                                        │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │                                                            │  │
│  │  학교급 *                                                    │  │
│  │  ○ 유치원  ● 초등학교  ○ 중학교  ○ 고등학교  ○ 특수학교 │  │
│  │                                                            │  │
│  │  공고 제목 *                                               │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ 2026학년도 기간제 영어교사 채용 공고              │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │                                                            │  │
│  │  ═══════════════ 분류 정보 ═══════════════                │  │
│  │  1차 분류 * (1개만 선택)                                   │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ 유치원 │ 초등담임 │ 교과과목 │ 비교과 │ 특수교육    │    │  │
│  │  │   ○   │    ○    │    ●    │   ○   │    ○        │    │  │
│  │  │ 방과후/돌봄 │ 행정·교육지원 │ 기타                 │    │  │
│  │  │     ○      │       ○       │   ○                  │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │                                                            │  │
│  │  2차 분류 (복수 선택)                                      │  │
│  │  □ 국어  □ 수학  ☑ 영어  □ 과학  □ 사회  □ 체육 ...    │  │
│  │                                                            │  │
│  │  ═══════════════ 모집 조건 ═══════════════                │  │
│  │  모집 마감일 *                                             │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ 2026-02-15                                        │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │  * 마감일 이후 자동으로 지도에서 숨김 처리됩니다           │  │
│  │                                                            │  │
│  │  긴급 채용                                                 │  │
│  │  ☑ 긴급 채용                                              │  │
│  │                                                            │  │
│  │  ═══════════════ 상세 내용 ═══════════════                │  │
│  │  상세 내용                                                 │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ - 근무기간: 2026.03.01 ~ 2027.02.28             │    │  │
│  │  │ - 담당업무: 3~6학년 영어수업                     │    │  │
│  │  │ - 자격요건: 중등 영어 정교사 2급 이상            │    │  │
│  │  │                                          500/2000 │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │                                                            │  │
│  │  ═══════════════ 첨부파일 ═══════════════                 │  │
│  │  첨부파일 (선택, 최대 30MB)                                │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │  파일을 드래그하거나 클릭하여 업로드              │    │  │
│  │  │                                                   │    │  │
│  │  │     PDF, HWP, DOC, DOCX, XLS, XLSX, JPG, PNG     │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │  [v] 공고문.pdf (2.3MB)                             [x]   │  │
│  │                                                            │  │
│  │  ═══════════════ 연락처 ═══════════════                   │  │
│  │  담당자 연락처 (선택)                                      │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ 031-123-4567                                      │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │                                                            │  │
│  │  ═══════════════ 등록 동의 ═══════════════                │  │
│  │  ┌───────────────────────────────────────────────────┐    │  │
│  │  │ 등록정보 동의 *                                   │    │  │
│  │  │                                                   │    │  │
│  │  │ 실제 구인구직이 되기 위한 정말 최소한의 필요한    │    │  │
│  │  │ 정보만 받고 있습니다. 올리신 내용은 학교와 사람을 │    │  │
│  │  │ 연결하는 구인구직에만 사용하겠습니다.             │    │  │
│  │  │                                                   │    │  │
│  │  │ ☑ 동의합니다                                     │    │  │
│  │  └───────────────────────────────────────────────────┘    │  │
│  │                                                            │  │
│  └────────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │                      [등록하기]                              ││  ← 푸터 고정
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
```

### 3-4. 내 공고 마커 클릭 시 (수정/삭제)

```
┌─────────────────────────────────────────────────────────────────┐
│  [지도 영역]                                                      │
│                                                                  │
│           [*] ← 내가 등록한 공고 마커 클릭                       │
│            │                                                     │
│  ┌─────────│───────────────────────────────────────────────────┐ │
│  │         ▼                                                   │ │
│  │  ┌─────────────────────────────────────────────────────┐   │ │
│  │  │  OO초등학교                               [긴급]   │   │ │
│  │  │  ─────────────────────────────────────────────────  │   │ │
│  │  │  2026학년도 기간제 영어교사 채용 공고              │   │ │
│  │  │                                                     │   │ │
│  │  │  경기도 성남시 분당구 ...                          │   │ │
│  │  │  마감: 2026-02-15 (D-17)                           │   │ │
│  │  │  교과과목 > 영어                                   │   │ │
│  │  │                                                     │   │ │
│  │  │  ─────────────────────────────────────────────────  │   │ │
│  │  │  * 내가 등록한 공고                                │   │ │
│  │  │                                                     │   │ │
│  │  │          [수정하기]        [삭제하기]              │   │ │
│  │  │                                                     │   │ │
│  │  └─────────────────────────────────────────────────────┘   │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘

※ 본인이 등록한 공고 마커 클릭 시에만 수정/삭제 버튼 노출
※ 다른 사람 공고는 기존처럼 조회만 가능
```

### 3-5. 상세보기 차별화 (source별 분기)

**핵심: 교육청(크롤링) 공고 vs 학자닷컴(직접등록) 공고 구분**

```
┌─────────────────────────────────────────────────────────────────┐
│  크롤링 공고 (source = 'crawled')                               │
│  ─────────────────────────────────────────────────────────────  │
│  OO초등학교 - 2026학년도 기간제 영어교사 채용 공고              │
│  ...                                                            │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  [길찾기]         [원문링크]                              │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│  직접등록 공고 (source = 'user_posted')                         │
│  ─────────────────────────────────────────────────────────────  │
│  OO초등학교 - 2026학년도 기간제 영어교사 채용 공고              │
│  ...                                                            │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  [길찾기]         [첨부파일]                              │  │  ← "원문링크" 대신 "첨부파일"
│  └──────────────────────────────────────────────────────────┘  │
│  ────────────────────────────────────────────────────────────  │
│  * 내가 등록한 공고 (본인일 경우에만)                           │
│  │          [수정하기]        [삭제하기]              │        │
└─────────────────────────────────────────────────────────────────┘
```

**분기 로직:**
| source | source_url | attachment_url | 표시 버튼 |
|--------|------------|----------------|----------|
| `crawled` | 있음 | 있거나 없음 | "원문링크" (외부 이동) |
| `user_posted` | 없음 | 있음 | "첨부파일" (다운로드) |
| `user_posted` | 없음 | 없음 | 버튼 비활성 또는 숨김 |

**수정 필요한 컴포넌트:**
1. `JobDetailPanel.tsx` (지도 마커 클릭 시) - source 분기 추가
2. `MobileJobDetail.tsx` (모바일 상세보기) - source 분기 추가
3. `JobDetailModal.tsx` (카드 클릭 시 모달) - 이미 일부 구현됨, 정리 필요

---

## 4. 백엔드 연동 계획

### 4-1. 데이터베이스 (기존 테이블 활용)

**job_postings 테이블 활용** (추가 컬럼 최소화)

```sql
-- 기존 필드 활용
source = 'user_posted'           -- 크롤링('crawled')과 구분
user_id = auth.uid()             -- 등록자
organization = '학교명'
title = '공고 제목'
content = '상세 내용'
deadline = '2026-02-15'          -- 마감일 (핵심!)
is_urgent = true/false           -- 긴급 여부
latitude, longitude              -- 지도 좌표
school_level = '초등학교'        -- 학교급

-- 신규 추가 필요 컬럼
ALTER TABLE job_postings ADD COLUMN IF NOT EXISTS
  primary_category VARCHAR(50);   -- 1차 분류 (기존 teacher_markers와 동일)

ALTER TABLE job_postings ADD COLUMN IF NOT EXISTS
  sub_categories TEXT[];          -- 2차 분류

ALTER TABLE job_postings ADD COLUMN IF NOT EXISTS
  contact_phone VARCHAR(20);      -- 담당자 연락처

ALTER TABLE job_postings ADD COLUMN IF NOT EXISTS
  attachment_bucket_path TEXT;    -- 첨부파일 스토리지 경로
```

### 4-2. 첨부파일 업로드 (Supabase Storage)

**버킷 설정**
```sql
-- job-attachments 버킷 생성 (Supabase Dashboard 또는 SQL)
INSERT INTO storage.buckets (id, name, public, file_size_limit, allowed_mime_types)
VALUES (
  'job-attachments',
  'job-attachments',
  true,  -- 공개 접근 허용
  31457280,  -- 30MB (30 * 1024 * 1024)
  ARRAY[
    'application/pdf',
    'application/x-hwp',
    'application/vnd.hancom.hwp',
    'application/msword',
    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    'application/vnd.ms-excel',
    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'image/jpeg',
    'image/png',
    'image/gif'
  ]
);
```

**RLS 정책 (Storage)**
```sql
-- 업로드: 인증된 사용자만 자신의 폴더에
CREATE POLICY "Users can upload to own folder" ON storage.objects
FOR INSERT WITH CHECK (
  bucket_id = 'job-attachments'
  AND auth.uid()::text = (storage.foldername(name))[1]
);

-- 조회: 모든 사람 가능
CREATE POLICY "Anyone can view attachments" ON storage.objects
FOR SELECT USING (bucket_id = 'job-attachments');

-- 삭제: 본인만
CREATE POLICY "Users can delete own files" ON storage.objects
FOR DELETE USING (
  bucket_id = 'job-attachments'
  AND auth.uid()::text = (storage.foldername(name))[1]
);
```

**업로드 로직 (TypeScript)**
```typescript
// src/lib/supabase/jobPostings.ts

const ALLOWED_EXTENSIONS = ['pdf', 'hwp', 'doc', 'docx', 'xls', 'xlsx', 'jpg', 'jpeg', 'png', 'gif'];
const MAX_FILE_SIZE = 30 * 1024 * 1024; // 30MB

export async function uploadJobAttachment(
  file: File,
  userId: string,
  postingId: string
): Promise<string> {
  // 파일 검증
  const extension = file.name.split('.').pop()?.toLowerCase();
  if (!extension || !ALLOWED_EXTENSIONS.includes(extension)) {
    throw new Error(`허용되지 않는 파일 형식입니다. (허용: ${ALLOWED_EXTENSIONS.join(', ')})`);
  }

  if (file.size > MAX_FILE_SIZE) {
    throw new Error('파일 크기는 30MB를 초과할 수 없습니다.');
  }

  // 파일 경로: {user_id}/{posting_id}/{원본파일명}
  const filePath = `${userId}/${postingId}/${file.name}`;

  const { data, error } = await supabase.storage
    .from('job-attachments')
    .upload(filePath, file, {
      cacheControl: '3600',
      upsert: true
    });

  if (error) throw error;

  // 공개 URL 반환
  const { data: { publicUrl } } = supabase.storage
    .from('job-attachments')
    .getPublicUrl(data.path);

  return publicUrl;
}
```

### 4-3. 만료 처리 (조회 시 필터링)

**선택된 방식: 쿼리 시점 필터링**

```typescript
// 지도 마커 조회 시 deadline 조건 적용
const fetchJobMarkers = async (bounds?: MapBounds) => {
  const today = new Date().toISOString().split('T')[0];

  let query = supabase
    .from('job_postings')
    .select('*')
    .not('latitude', 'is', null)
    .not('longitude', 'is', null)
    .gte('deadline', today);  // 마감일이 오늘 이후인 것만

  if (bounds) {
    query = query
      .gte('latitude', bounds.south)
      .lte('latitude', bounds.north)
      .gte('longitude', bounds.west)
      .lte('longitude', bounds.east);
  }

  return query;
};
```

### 4-4. RLS 정책 (job_postings)

```sql
-- 공고 등록: 인증된 사용자만
CREATE POLICY "Users can create their own postings" ON job_postings
FOR INSERT WITH CHECK (auth.uid() = user_id);

-- 공고 수정: 본인 것만
CREATE POLICY "Users can update their own postings" ON job_postings
FOR UPDATE USING (auth.uid() = user_id);

-- 공고 삭제: 본인 것만
CREATE POLICY "Users can delete their own postings" ON job_postings
FOR DELETE USING (auth.uid() = user_id);

-- 조회: 만료 안된 공고는 누구나 (본인 공고는 만료되어도 볼 수 있음)
CREATE POLICY "Anyone can view active postings" ON job_postings
FOR SELECT USING (
  deadline >= CURRENT_DATE
  OR auth.uid() = user_id
);
```

---

## 5. 구현 우선순위

### Phase 1-A: 인프라 (DB/Storage)
1. [x] job_postings 테이블 컬럼 추가 마이그레이션 (완료)
2. [x] Supabase Storage 버킷 설정 - job-attachments (완료)

### Phase 1-B: 상세보기 source 분기 (먼저 구현)
> **중요: 공고등록 전에 상세보기부터 준비해야 함**
1. [ ] JobDetailPanel.tsx - source 분기 추가 (원문링크 vs 첨부파일)
2. [ ] MobileJobDetail.tsx - source 분기 추가
3. [ ] JobDetailModal.tsx - 기존 로직 정리 및 통일

### Phase 1-C: 공고등록 UI/UX
4. [ ] LayerToggleBar에 공고등록 버튼 추가
5. [ ] 공고등록 모달 (JobPostingModal.tsx) - 단일 스크롤 화면
6. [ ] 지도 클릭 → 위치 선택 → 모달 오픈 흐름
7. [ ] 첨부파일 업로드 컴포넌트 (FileDropzone.tsx)
8. [ ] 비로그인 → 로그인 → 위치 선택 흐름

### Phase 1-D: 등록 기능 완성
9. [ ] 공고 등록 API 함수 (jobPostings.ts)
10. [ ] 지도 마커 표시 (deadline >= today 필터)
11. [ ] 첨부파일 Storage 업로드 연동

### Phase 2: 수정/삭제
1. [ ] 본인 공고 마커 클릭 시 수정/삭제 버튼 표시
2. [ ] 공고 수정 기능 (모달 재사용)
3. [ ] 공고 삭제 기능 (확인 모달)
4. [ ] 첨부파일 교체/삭제 기능

### Phase 3: 고도화 (선택)
1. [ ] 조회수 카운팅
2. [ ] 신고 기능
3. [ ] 공고 복사 기능

---

## 6. 파일 구조 예상

```
src/
├── components/
│   ├── job/
│   │   ├── JobPostingModal.tsx          # [신규] 공고등록/수정 단일 스크롤 모달
│   │   ├── JobDeleteConfirmModal.tsx    # [신규] 삭제 확인 모달
│   │   └── FileDropzone.tsx             # [신규] 드래그 앤 드롭 파일 업로드
│   ├── map/
│   │   └── LayerToggleBar.tsx           # [수정] 공고등록 버튼 추가
│   ├── cards/
│   │   └── JobDetailModal.tsx           # [수정] source 분기 (원문링크 vs 첨부파일)
│   ├── mobile/
│   │   └── MobileJobDetail.tsx          # [수정] source 분기 (원문링크 vs 첨부파일)
│   └── pages/new-landing/components/
│       └── JobDetailPanel.tsx           # [수정] source 분기 (원문링크 vs 첨부파일)
├── lib/
│   └── supabase/
│       └── jobPostings.ts               # [신규] 공고 CRUD + 파일 업로드 함수
└── types/
    └── jobPostings.ts                   # [수정] attachment_url 타입 추가

supabase/
└── migrations/
    └── 20260129_add_job_attachments_storage.sql  # [완료]
```

### 상세보기 컴포넌트 수정 요약

| 컴포넌트 | 위치 | 현재 상태 | 변경 사항 |
|---------|------|---------|----------|
| `JobDetailPanel.tsx` | 지도 마커 클릭 | source 구분 없음 | source 분기 추가 |
| `MobileJobDetail.tsx` | 모바일 상세 | source 구분 없음 | source 분기 추가 |
| `JobDetailModal.tsx` | 카드 클릭 모달 | 일부 구현됨 | 로직 정리 |

**공통 변경 로직:**
```tsx
// source에 따른 버튼 분기
{job.source === 'user_posted' ? (
  // 직접등록 공고 - 첨부파일 다운로드
  job.attachment_url && (
    <a href={job.attachment_url} download>첨부파일</a>
  )
) : (
  // 크롤링 공고 - 원문링크
  job.source_url && (
    <a href={job.source_url} target="_blank">원문링크</a>
  )
)}
```

---

## 7. 결정된 사항 (2026-01-29)

### 확정된 구현 방향

| 항목 | 결정 | 이유 |
|------|------|------|
| **버튼 위치** | LayerToggleBar (구직등록 아래) | 우측 플로팅바에 통합, 기존 UI와 일관성 |
| **위치 입력** | 지도 클릭 (처음부터) | 구직등록과 동일한 UX, FullScreenLocationPicker 재사용 |
| **모달 구조** | 단일 스크롤 화면 | 스텝 1~4 대신 한 화면에서 모든 입력 (개발 스타일 반영) |
| **승인 절차** | 즉시 노출 | MVP 단계에서 빠른 출시 우선, 신고 기능으로 보완 |
| **등록 권한** | 누구나 가능 | 제한 없이 시작, 악용 시 추후 제한 |
| **만료 처리** | 조회 시 필터링 | `deadline >= today` 조건만으로 간단 처리 |
| **비로그인 흐름** | 로그인 → 위치 선택 → 모달 | 끊김 없는 사용자 경험 |
| **분류 체계** | 8개 1차 분류 동일 적용 | 구직/공고 필터 통일, 매칭 용이 |
| **공고 관리** | 마커 클릭 시 수정/삭제 | 별도 관리 화면 불필요, 직관적 UX |
| **마커 구분** | 크롤링/직접등록 동일 표시 | 출처 구분 불필요, 본인 공고만 수정/삭제 버튼 |
| **수정 범위** | 마감일 포함 모든 필드 수정 가능 | 마감일 연장도 허용 |
| **첨부파일** | 30MB, 드래그 업로드 지원 | PDF, HWP, DOC, XLS, JPG, PNG 등 |
| **동의 문구** | "등록정보 동의" 형식 | 최소 정보 수집 안내 + 구인구직 목적 명시 |
| **학교급 선택** | 1차 분류와 별도 표시 | 학교급=공고 대상, 1차 분류=직종 |
| **입력 필드** | 최소화 | 채용형태/보수 등 불필요 필드 제거 |
| **상세보기 분기** | source별 버튼 차별화 | 크롤링=원문링크, 직접등록=첨부파일 |

---

## 8. 디자인 가이드 (anti-vibe-design 적용)

### 절대 규칙
- **이모지 금지**: UI에 이모지 사용 안 함
- **형광펜 금지**: 글자 뒤 배경색 사용 안 함 (bg-yellow-200 등)
- **원색 지양**: 프로젝트 컬러 팔레트만 사용
- **바이브코딩 금지**: 과도한 그라디언트, 애니메이션 자제

### 컬러 팔레트
| 용도 | 클래스 | HEX |
|------|--------|-----|
| 메인 파랑 | `bg-[#3B82F6]` | #3B82F6 |
| 글래스모피즘 | `rgba(104, 178, 255, 0.15~0.25)` | #68B2FF |
| 소프트 레드 | `bg-[#F87171]` | #F87171 |
| 본문 텍스트 | `text-gray-800` | - |
| 보조 텍스트 | `text-gray-600` | - |

### 구직등록 모달 참조 포인트 (TeacherMarkerModal)
- **헤더**: 글래스모피즘 적용 (`backdrop-blur-md`, 투명 그라디언트)
- **폼 레이아웃**: 단일 스크롤, 섹션별 구분선
- **버튼 스타일**: `bg-sky-500 hover:bg-sky-600` (제출 버튼)
- **필수 표시**: 빨간 별표 `<span className="text-red-500">*</span>`
- **동의 영역**: `bg-gray-50` 배경의 박스

### 공고등록 모달 적용 예시
```tsx
// 헤더 - 글래스모피즘
<div
  className="px-6 py-4 border-b flex-shrink-0 backdrop-blur-md"
  style={{
    background: 'linear-gradient(135deg, rgba(104, 178, 255, 0.15) 0%, rgba(104, 178, 255, 0.25) 100%)',
    borderColor: 'rgba(104, 178, 255, 0.3)',
    backdropFilter: 'blur(10px)'
  }}
>

// 카테고리 버튼 (선택 상태)
<button className="px-3 py-2 text-sm rounded-lg border-2 text-white bg-sky-500 border-sky-500">

// 카테고리 버튼 (미선택 상태)
<button className="px-3 py-2 text-sm rounded-lg border-2 bg-white text-gray-600 border-gray-200">

// 제출 버튼
<button className="w-full py-3 text-sm font-semibold text-white rounded-lg bg-sky-500 hover:bg-sky-600">
```

---

## 9. 리스크 & 고려사항

### 허위 공고 방지 (MVP 이후)
- 신고 기능 추가 (Phase 3)
- 악용 발생 시 학교 이메일 인증 도입 검토
- 관리자 모니터링 대시보드

### 크롤링 공고와의 중복
- 같은 학교에서 크롤링 공고와 직접 등록 공고가 겹칠 수 있음
- `source` 필드로 구분: `'crawled'` vs `'user_posted'`
- **권장: 동일하게 표시** (사용자 입장에서 출처 구분 불필요)

### 성능 고려
- deadline 인덱스로 필터링 성능 확보
- 만료 공고는 쿼리에서 자연 제외 (테이블 비대화 문제 없음)

---

## 10. Supabase Storage 버킷 설정 쿼리

아래 쿼리를 Supabase SQL Editor에서 실행해주세요:

```sql
-- 1. 버킷 생성
INSERT INTO storage.buckets (id, name, public, file_size_limit, allowed_mime_types)
VALUES (
  'job-attachments',
  'job-attachments',
  true,
  31457280,  -- 30MB
  ARRAY[
    'application/pdf',
    'application/x-hwp',
    'application/vnd.hancom.hwp',
    'application/msword',
    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    'application/vnd.ms-excel',
    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    'image/jpeg',
    'image/png',
    'image/gif'
  ]
)
ON CONFLICT (id) DO UPDATE SET
  file_size_limit = EXCLUDED.file_size_limit,
  allowed_mime_types = EXCLUDED.allowed_mime_types;

-- 2. Storage RLS 정책
-- 업로드: 인증된 사용자만 자신의 폴더에
CREATE POLICY "Users can upload to own folder" ON storage.objects
FOR INSERT WITH CHECK (
  bucket_id = 'job-attachments'
  AND auth.uid()::text = (storage.foldername(name))[1]
);

-- 조회: 모든 사람 가능
CREATE POLICY "Anyone can view job attachments" ON storage.objects
FOR SELECT USING (bucket_id = 'job-attachments');

-- 삭제: 본인만
CREATE POLICY "Users can delete own job attachments" ON storage.objects
FOR DELETE USING (
  bucket_id = 'job-attachments'
  AND auth.uid()::text = (storage.foldername(name))[1]
);
```

