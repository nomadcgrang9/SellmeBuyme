# 배너 관리 기능 구현 계획

## 개요

관리자 페이지에 **배너 관리** 섹션을 신설하여, 두 가지 유형의 배너를 관리합니다:
1. **히어로 배너**: 공고 목록 상단에 고정되는 브랜딩/광고 배너
2. **네이티브 배너**: 공고 목록에 자연스럽게 섞여 보이는 배너 (추후 구현)

기존 "홍보카드 관리" 메뉴는 삭제하지 않고 숨김 처리합니다.

---

## 현재 상태 분석

### 히어로 배너 (현재 하드코딩)
```
위치: 공고 목록 패널 상단
파일: src/pages/new-landing/components/Hero.tsx (line 1180~1189)
```

### 실제 크기 제약사항

```
┌─────────────────────────────────────────────┐
│                   240px                     │  ← 패널 전체 너비
│  ┌───────────────────────────────────────┐  │
│  │             216px (mx-3)              │  │  ← 배너 영역 너비
│  │  ┌─────────────────────────────────┐  │  │
│  │  │        184px (px-4)             │  │  │  ← 텍스트 영역 너비
│  │  │                                 │  │  │
│  │  │  공고와 선생님을 찾는           │  │  │  ← 1줄: 약 12자 (14px)
│  │  │  가장 쉬운 방법 - 쌤찾기        │  │  │  ← 2줄: 약 14자 (14px)
│  │  │                                 │  │  │
│  │  └─────────────────────────────────┘  │  │
│  └───────────────────────────────────────┘  │
└─────────────────────────────────────────────┘
```

### 글자 수 제한 (권장)
| 항목 | 권장 글자 수 | 비고 |
|:---|:---:|:---|
| 1줄 (14px 기준) | 12~14자 | 넘어가면 자동 줄바꿈 |
| 2줄 합계 | 24~28자 | 2줄 초과 시 높이 증가 |
| 최대 줄 수 | 3줄 | 그 이상은 공간 부족 |

---

## 사용자 시나리오

### 시나리오 1: 문구만 변경
> "겨울 방학 기간제 공고가 많이 올라왔네. 배너 문구를 바꿔야겠다."

1. 관리자 페이지 → 배너 관리 → 히어로 배너
2. 현재 배너 편집 클릭
3. 제목 변경: "겨울 방학 기간제 공고" / "지금 바로 확인하세요"
4. 미리보기에서 실시간 확인
5. 저장 버튼 클릭

### 시나리오 2: 배너 색상 변경
> "신년 이벤트라서 빨간색 느낌으로 바꾸고 싶어."

1. 배경색 피커에서 `#EF4444` 선택
2. 미리보기에서 텍스트 가독성 확인
3. 필요 시 텍스트색도 조정

### 시나리오 3: 배너에 아이콘 추가
> "새해 이벤트라서 작은 아이콘을 넣고 싶어."

1. 아이콘 선택 드롭다운에서 "축하" 아이콘 선택
2. 미리보기에서 아이콘 + 텍스트 레이아웃 확인
3. 아이콘이 있으면 텍스트 영역이 줄어듦 (약 150px)

### 시나리오 4: 글자가 너무 많아서 넘침
> "문구를 길게 썼는데 미리보기에서 이상하게 보여."

1. 미리보기에서 3줄 이상 → 경고 메시지 표시
2. "권장 글자 수를 초과했습니다. 줄여주세요." 안내
3. 강제 저장은 가능하지만 경고 유지

---

## 관리자 UI 상세 설계

### 메뉴 구조 변경

**변경 전:**
```
├─ 대시보드
├─ 크롤링 게시판 관리
├─ 홍보카드 관리          ← 숨김 처리
├─ 사용자 관리
├─ 콘텐츠 관리
└─ 설정
```

**변경 후:**
```
├─ 대시보드
├─ 크롤링 게시판 관리
├─ 배너 관리              ← 신규
│   ├─ 히어로 배너        (Phase 1 - 완료)
│   └─ 네이티브 배너      (Phase 2 - 상세 설계 추가)
├─ 사용자 관리
├─ 콘텐츠 관리
└─ 설정
```

---

### 히어로 배너 관리 화면

```
┌─────────────────────────────────────────────────────────────────────────────────┐
┌─────────────────────────────────────────────────────────────────────────────────┐
│  배너 관리 (슬라이드 다운 탭)                                                    │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ▼ 배너 유형 선택                                                                │
│  ┌─────────────────────────┐ ┌─────────────────────────┐                         │
│  │ ● 히어로 배너           │ │ ○ 네이티브 배너         │                         │
│  └─────────────────────────┘ └─────────────────────────┘                         │
│                                                                                 │
│  [ 히어로 배너 관리 화면 (기존 동일) ]                                           │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │  기본 설정                                                               │   │
│  │  ─────────────────────────────────────────────────────────────────────  │   │
│  │  배너 노출    [✓] 활성화                                                 │   │
│  │  캐러셀 속도  [  5  ] 초  (3~10초)                                       │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                 │
│  ┌─────────────────────────────────┐  ┌─────────────────────────────────────┐  │
│  │                                 │  │                                     │  │
│  │  배너 목록                      │  │  실시간 미리보기                    │  │
│  │  ─────────────────────────────  │  │  ─────────────────────────────────  │  │
│  │                                 │  │                                     │  │
│  │  [배너 1] ● 활성    [편집][삭제]│  │  ┌─────────────────────────────┐    │  │
│  │  "공고와 선생님을 찾는..."      │  │  │                             │    │  │
│  │                                 │  │  │  공고와 선생님을 찾는       │    │  │
│  │  [배너 2] ○ 비활성  [편집][삭제]│  │  │  가장 쉬운 방법 - 쌤찾기    │    │  │
│  │  "겨울 방학 특별 공고..."       │  │  │                             │    │  │
│  │                                 │  │  │                   ● ○      │    │  │
│  │  ─────────────────────────────  │  │  └─────────────────────────────┘    │  │
│  │  [+ 새 배너 추가]               │  │                                     │  │
│  │                                 │  │  ↑ 실제 크기 비율 (216 x auto px)   │  │
│  └─────────────────────────────────┘  └─────────────────────────────────────┘  │
│                                                                                 │
│  ═══════════════════════════════════════════════════════════════════════════   │
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │  배너 편집 (배너 1)                                                      │   │
│  │  ─────────────────────────────────────────────────────────────────────  │   │
│  │                                                                          │   │
│  │  제목 (1줄)                                                              │   │
│  │  ┌─────────────────────────────────────────────────────┐  12/14자       │   │
│  │  │ 공고와 선생님을 찾는                                │                │   │
│  │  └─────────────────────────────────────────────────────┘                │   │
│  │                                                                          │   │
│  │  부제 (2줄)                                                              │   │
│  │  ┌─────────────────────────────────────────────────────┐  14/14자       │   │
│  │  │ 가장 쉬운 방법 - 쌤찾기                             │                │   │
│  │  └─────────────────────────────────────────────────────┘                │   │
│  │                                                                          │   │
│  │  아이콘 (선택)                                                           │   │
│  │  ┌──────────────────────────────┐                                       │   │
│  │  │ 없음                      ▼ │   [🔍] [🎓] [📢] [🎉] [💼]             │   │
│  │  └──────────────────────────────┘                                       │   │
│  │                                                                          │   │
│  │  색상 설정                                                               │   │
│  │  ┌──────────────┐  ┌──────────────┐                                     │   │
│  │  │ 배경색       │  │ 텍스트색     │                                     │   │
│  │  │   #3B82F6    │  │   #FFFFFF    │                                     │   │
│  │  │   [■■■■■]    │  │   [□□□□□]    │                                     │   │
│  │  └──────────────┘  └──────────────┘                                     │   │
│  │                                                                          │   │
│  │  링크 URL (선택)                                                         │   │
│  │  ┌─────────────────────────────────────────────────────┐                │   │
│  │  │ https://                                            │                │   │
│  │  └─────────────────────────────────────────────────────┘                │   │
│  │                                                                          │   │
│  │  ─────────────────────────────────────────────────────────────────────  │   │
│  │                                              [취소]  [저장]  [즉시적용]  │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---

### 미리보기 상세

```
실시간 미리보기 영역
───────────────────────────────────────────────

정상 상태:
┌─────────────────────────────────┐
│  (아이콘)  공고와 선생님을 찾는 │   ← 파란 배경 (#3B82F6)
│           가장 쉬운 방법        │   ← 흰 텍스트
│                       ● ○      │   ← 인디케이터 (배너가 2개 이상일 때)
└─────────────────────────────────┘

경고 상태 (글자 수 초과):
┌─────────────────────────────────┐
│  공고와 선생님을 찾는 가장 쉬   │   ← ⚠ 3줄 초과!
│  운 방법입니다 지금 바로 확인   │
│  해보세요 쌤찾기에서           │
└─────────────────────────────────┘
⚠ 권장 글자 수(28자)를 초과했습니다.
  현재: 42자 / 3줄 이상

아이콘 포함 시:
┌─────────────────────────────────┐
│  🎓 공고와 선생님을 찾는       │   ← 아이콘 + 텍스트
│     가장 쉬운 방법              │   ← 텍스트 영역 축소 (150px)
│                       ●        │
└─────────────────────────────────┘
```

---

## 데이터베이스 스키마

```sql
-- 히어로 배너 설정
CREATE TABLE hero_banner_config (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  is_active BOOLEAN DEFAULT true,
  rotation_speed INTEGER DEFAULT 5,  -- 초 단위 (3~10)
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 히어로 배너 목록
CREATE TABLE hero_banners (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title VARCHAR(20) NOT NULL,        -- 1줄, 권장 14자 이내
  subtitle VARCHAR(20),              -- 2줄, 권장 14자 이내
  icon VARCHAR(20),                  -- 이모지 또는 아이콘 키
  bg_color VARCHAR(7) DEFAULT '#3B82F6',
  text_color VARCHAR(7) DEFAULT '#FFFFFF',
  link_url TEXT,
  display_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 초기 데이터
INSERT INTO hero_banner_config (is_active, rotation_speed) VALUES (true, 5);
INSERT INTO hero_banners (title, subtitle, display_order, is_active) VALUES 
  ('공고와 선생님을 찾는', '가장 쉬운 방법 - 쌤찾기', 0, true);
```

---

## 유효성 검사 규칙

| 필드 | 규칙 | 에러 메시지 |
|:---|:---|:---|
| 제목 | 필수, 1~20자 | "제목을 입력해주세요" / "20자 이내로 입력해주세요" |
| 부제 | 선택, 0~20자 | "20자 이내로 입력해주세요" |
| 배경색 | HEX 형식 | "올바른 색상 코드를 입력해주세요" |
| 텍스트색 | HEX 형식 | "올바른 색상 코드를 입력해주세요" |
| 링크 | URL 형식 또는 빈값 | "올바른 URL을 입력해주세요" |
| 회전 속도 | 3~10 정수 | "3~10 사이의 값을 입력해주세요" |

---

## 구현 순서

### Phase 1: 히어로 배너 (이번 구현)

| 단계 | 작업 | 예상 시간 |
|:---:|:---|:---:|
| 1 | DB 스키마 생성 | 30분 |
| 2 | Supabase 쿼리 함수 | 1시간 |
| 3 | AdminPage 메뉴 변경 (홍보카드 숨김, 배너 관리 추가) | 30분 |
| 4 | HeroBannerManagement 관리자 UI | 3시간 |
| 5 | HeroCard 캐러셀 프론트엔드 | 1시간 |
| 6 | Hero.tsx 통합 | 30분 |
| 7 | 테스트 및 배포 | 30분 |
| **총합** | | **7시간** |

### Phase 2: 네이티브 배너 (이번 구현)

- **위치**: 공고 목록 사이에 삽입 (기본값: 5개 항목마다)
- **형태**: 일반 공고 카드와 다른 디자인 (배경색/이미지 강조)
- **기능**: 이미지 업로드, 외부 링크 연결

#### 관리자 UI 상세 (네이티브)
```
┌─────────────────────────────────────────────────────────────────────────┐
│  기본 설정                                                              │
│  ─────────────────────────────────────────────────────────────────────  │
│  활성화 여부  [✓] 노출                                                   │
│  노출 주기    [ 5 ] 번째 공고마다 반복                                  │
│  디자인 타입  [ 이미지형 (Full) ▼ ]                                     │
└─────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────┐  ┌─────────────────────────────────────┐
│  배너 목록                      │  │  미리보기                           │
│  ─────────────────────────────  │  │  ─────────────────────────────────  │
│  [배너 1] (이미지 썸네일)       │  │  ┌─────────────────────────────┐    │
│  [삭제]                         │  │  │                             │    │
│                                 │  │  │      [ 이미지 배너 ]        │    │
│  [+ 이미지 업로드 및 추가]      │  │  │                             │    │
│                                 │  │  └─────────────────────────────┘    │
└─────────────────────────────────┘  └─────────────────────────────────────┘
```

#### DB 스키마 (네이티브)
```sql
-- 네이티브 배너 설정
CREATE TABLE native_banner_config (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  is_active BOOLEAN DEFAULT true,
  insertion_interval INTEGER DEFAULT 5, -- N번째마다 삽입
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- 네이티브 배너 목록
CREATE TABLE native_banners (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  image_url TEXT NOT NULL,           -- Supabase Storage URL
  link_url TEXT,                     -- 클릭 시 이동할 주소
  display_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## 파일 구조

```
src/
├── components/
│   └── admin/
│       ├── BannerEditSection.tsx       (기존 - 숨김 처리)
│       └── HeroBannerManagement.tsx    (신규)
├── lib/
│   └── supabase/
│       └── hero-banner.ts              (신규)
├── pages/
│   ├── AdminPage.tsx                   (수정 - 메뉴 변경)
│   └── new-landing/
│       └── components/
│           ├── Hero.tsx                (수정)
│           └── HeroCard.tsx            (신규)
└── types/
    └── hero-banner.ts                  (신규)
```
