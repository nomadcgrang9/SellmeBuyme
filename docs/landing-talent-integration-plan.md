# ëœë”©í˜ì´ì§€-ì¸ë ¥ì¹´ë“œ ì—°ë™ ì‹œìŠ¤í…œ ì„¤ê³„ ë¬¸ì„œ

**ì‘ì„±ì¼**: 2025-11-05
**ëª©ì **: ëœë”©í˜ì´ì§€ì—ì„œ ìˆ˜ì§‘í•œ ì¸ë ¥ ì •ë³´ë¥¼ ì‹¤ì œ ì¸ë ¥ì¹´ë“œë¡œ ë“±ë¡í•˜ëŠ” ì‹œìŠ¤í…œ êµ¬í˜„

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ë°°ê²½](#í”„ë¡œì íŠ¸-ë°°ê²½)
2. [í¬ë¡¤ë§ ì‹œìŠ¤í…œ ë¬¸ì œ í•´ê²°](#í¬ë¡¤ë§-ì‹œìŠ¤í…œ-ë¬¸ì œ-í•´ê²°)
3. [ëœë”©í˜ì´ì§€-ì¸ë ¥ì¹´ë“œ ì—°ë™ ìš”êµ¬ì‚¬í•­](#ëœë”©í˜ì´ì§€-ì¸ë ¥ì¹´ë“œ-ì—°ë™-ìš”êµ¬ì‚¬í•­)
4. [í˜„ì¬ ì‹œìŠ¤í…œ êµ¬ì¡° ë¶„ì„](#í˜„ì¬-ì‹œìŠ¤í…œ-êµ¬ì¡°-ë¶„ì„)
5. [êµ¬í˜„ ê³„íš](#êµ¬í˜„-ê³„íš)
6. [ë°ì´í„° íë¦„ ì„¤ê³„](#ë°ì´í„°-íë¦„-ì„¤ê³„)
7. [íŒŒì¼ ìˆ˜ì • ëª©ë¡](#íŒŒì¼-ìˆ˜ì •-ëª©ë¡)
8. [êµ¬í˜„ ìš°ì„ ìˆœìœ„](#êµ¬í˜„-ìš°ì„ ìˆœìœ„)

---

## í”„ë¡œì íŠ¸ ë°°ê²½

### í•µì‹¬ ëª©í‘œ
**"ëœë”©í˜ì´ì§€ì—ì„œ ê°„ë‹¨íˆ ì…ë ¥ë°›ì€ ì •ë³´ë¡œ ì¦‰ì‹œ ì¸ë ¥ì¹´ë“œë¥¼ ìƒì„±í•˜ê³ , ì‹¤ì œ ì¹´ë“œ ë ˆì´ì•„ì›ƒì„ ë¯¸ë¦¬ë³´ê¸°ë¡œ ë³´ì—¬ì¤Œìœ¼ë¡œì¨ ì¦‰ê°ì ì¸ ë§Œì¡±ê°ì„ ì œê³µí•œë‹¤."**

### ì‚¬ìš©ì ì—¬ì •
1. ëœë”©í˜ì´ì§€ ë°©ë¬¸
2. ì´ë¦„, ì—­í• , ì§€ì—­, ë¶„ì•¼, ì—°ë½ì²˜ ì…ë ¥ (ê¸°ì¡´)
3. **"ê´€ì‹¬ìˆìŒ" ì„ íƒ ì‹œ ì¶”ê°€ ì •ë³´ ì…ë ¥** (ì‹ ê·œ)
   - ì „ë¬¸ ë¶„ì•¼ ìƒì„¸ ì„ íƒ
   - ê²½ë ¥ ì„ íƒ
   - ìê²©/ë©´í—ˆ, ìê¸°ì†Œê°œ (ì„ íƒ)
   - ì´ë©”ì¼ ì…ë ¥
4. **ì‹¤ì œ ì¸ë ¥ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ** â­ (í•µì‹¬ ê¸°ëŠ¥)
   - "ì´ë ‡ê²Œ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ì„œ ì„ ìƒë‹˜ì„ í•™êµì™€ ì—°ê²°í•˜ê² ìŠµë‹ˆë‹¤"
   - ì‹¤ì œ ë©”ì¸í˜ì´ì§€ì™€ ë™ì¼í•œ TalentCard ë ˆì´ì•„ì›ƒ í‘œì‹œ
5. "ë“±ë¡ ì™„ë£Œí•˜ê¸°" í´ë¦­ â†’ talents í…Œì´ë¸”ì— ë¹„íšŒì› ë“±ë¡
6. ë©”ì¸í˜ì´ì§€ë¡œ ì´ë™ ì‹œ ì¸ë ¥ì¹´ë“œ í† ê¸€ ìë™ ON + í•˜ì´ë¼ì´íŠ¸

### êµì‚¬ ë¶„ê¸° ì²˜ë¦¬
- **êµì‚¬ë§Œ ì„ íƒí•œ ê²½ìš°**: "ì¸ë ¥í’€ ê²€ìƒ‰ì„ í•˜ê±°ë‚˜ ì•„ì´ë“¤ì„ ìœ„í•œ ì²´í—˜í”„ë¡œê·¸ë¨ì„ ë³´ëŸ¬ ê°€ì‹œê² ì–´ìš”?"
  - "ê³µê³  ë³´ëŸ¬ê°€ê¸°" ë²„íŠ¼ â†’ ë©”ì¸í˜ì´ì§€ (ì¸ë ¥ì¹´ë“œ í† ê¸€ OFF)
- **ê°•ì‚¬/í–‰ì •ì¸ë ¥/ì—…ì²´ í¬í•¨ ì‹œ**: ì¸ë ¥ì¹´ë“œ ë“±ë¡ í”„ë¡œì„¸ìŠ¤ ì§„í–‰

---

## í¬ë¡¤ë§ ì‹œìŠ¤í…œ ë¬¸ì œ í•´ê²°

### 1. "ë¯¸ìƒ" location ì¹´ë“œ ì›ì¸ ë¶„ì„

#### ë¬¸ì œ
í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¼ë¶€ ê³µê³  ì¹´ë“œì˜ locationì´ "ë¯¸ìƒ"ìœ¼ë¡œ í‘œì‹œë¨

#### ì›ì¸
- 26ê°œ "ë¯¸ìƒ" ì¹´ë“œ: **crawl_board_id = NULL** (ì˜ˆì „ ë°ì´í„°)
- 2025-11-04 ì´ì „ í¬ë¡¤ë§ ë°ì´í„°
- ì¤‘ë³µ ë°©ì§€ ë¡œì§(`source_url` ê¸°ë°˜)ìœ¼ë¡œ ì¬í¬ë¡¤ë§ë˜ì§€ ì•ŠìŒ â†’ ì •ìƒ ë™ì‘

#### í•´ê²°
- **ìµœê·¼ í¬ë¡¤ë§ ë°ì´í„° (2025-11-05 ì´í›„)**: ëª¨ë‘ location ì •ìƒ
- ì„±ë‚¨êµìœ¡ì§€ì›ì²­: 6ê°œ ì‹ ê·œ ê³µê³  ëª¨ë‘ `location='ì„±ë‚¨'` âœ…
- êµ¬ë¦¬ë‚¨ì–‘ì£¼: 10ê°œ ì‹ ê·œ ê³µê³  ëª¨ë‘ `location='êµ¬ë¦¬ë‚¨ì–‘ì£¼'` âœ…
- ê¸°ì´ˆìì¹˜ë‹¨ì²´ location í•˜ë“œì½”ë”© ì‹œìŠ¤í…œ ì •ìƒ ì‘ë™ í™•ì¸

#### ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
- `scripts/db/analyze-misung-cards.ts`: "ë¯¸ìƒ" ì¹´ë“œ ì›ì¸ ë¶„ì„
- `scripts/db/verify-seongnam-locations.ts`: ì„±ë‚¨ í¬ë¡¤ë§ ê²°ê³¼ ê²€ì¦
- `scripts/db/verify-namyangju-crawl.ts`: êµ¬ë¦¬ë‚¨ì–‘ì£¼ í¬ë¡¤ë§ ê²°ê³¼ ê²€ì¦

---

### 2. êµ¬ë¦¬ë‚¨ì–‘ì£¼ í¬ë¡¤ëŸ¬ source ìˆ˜ì •

#### ë¬¸ì œ
êµ¬ë¦¬ë‚¨ì–‘ì£¼ ê²Œì‹œíŒ í¬ë¡¤ë§ ì‹¤íŒ¨
```
ì—ëŸ¬: crawl_boardsì— "êµ¬ë¦¬ë‚¨ì–‘ì£¼êµìœ¡ì§€ì›ì²­ ì¸ë ¥í’€" ê²Œì‹œíŒì´ ì—†ìŠµë‹ˆë‹¤.
```

#### ì›ì¸
- GitHub Actions ì›Œí¬í”Œë¡œìš°ê°€ `source=namyangju`ë¡œ ì„¤ì •ë¨
- `sources/namyangju.js`ëŠ” "êµ¬ë¦¬ë‚¨ì–‘ì£¼êµìœ¡ì§€ì›ì²­ ì¸ë ¥í’€" ì´ë¦„ìœ¼ë¡œ DB ì¡°íšŒ
- ì‹¤ì œ DBì—ëŠ” **"êµ¬ë¦¬ë‚¨ì–‘ì£¼ ê¸°ê°„ì œêµì‚¬"**ë¡œ ë“±ë¡ë¨
- ì´ ê²Œì‹œíŒì€ **AI ìƒì„± í¬ë¡¤ëŸ¬** (`crawler_source_code` ì»¬ëŸ¼ ê°’ ìˆìŒ)

#### í•´ê²°
`.github/workflows/run-crawler.yml` ìˆ˜ì •:

**Line 77-79 (Manual dispatch ë§¤í•‘)**:
```yaml
elif [ "$BOARD_ID" = "5d7799d9-5d8d-47a2-b0df-6dd4f39449bd" ]; then
  echo "source=ai-generated" >> $GITHUB_OUTPUT  # namyangju â†’ ai-generated
  exit 0
```

**Line 227-229 (Scheduled matrix)**:
```yaml
- board_id: '5d7799d9-5d8d-47a2-b0df-6dd4f39449bd'
  source: 'ai-generated'  # namyangju â†’ ai-generated
  name: 'êµ¬ë¦¬ë‚¨ì–‘ì£¼ ê¸°ê°„ì œêµì‚¬'
```

**Line 121-139, 277-295 (Caseë¬¸)**:
```bash
# namyangju ì¼€ì´ìŠ¤ ì œê±°
"ai-generated")
  echo "ğŸ¤– Running AI-generated crawler for board: $BOARD_ID"
  node index.js --board-id="$BOARD_ID" --mode="$CRAWL_MODE"
  ;;
```

#### ê²°ê³¼
- 10ê°œ ê³µê³  í¬ë¡¤ë§ ì„±ê³µ âœ…
- ëª¨ë“  ê³µê³  `location='êµ¬ë¦¬ë‚¨ì–‘ì£¼'` ì •ìƒ ì„¤ì • âœ…
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¹´ë“œ ì •ìƒ í‘œì‹œ í™•ì¸ âœ…

---

### 3. ìë™ í¬ë¡¤ë§ ìŠ¤ì¼€ì¤„ ê²€ì¦

#### GitHub Actions Cron ì„¤ì •
- **Cron í‘œí˜„ì‹**: `0 1 * * *` (UTC)
- **í•œêµ­ì‹œê°„**: ë§¤ì¼ ì˜¤ì „ 10ì‹œ (UTC+9)

#### Scheduled Matrix êµ¬ì„± (5ê°œ ê²Œì‹œíŒ)
```yaml
matrix:
  board:
    - board_id: 'f4c852f1-f49a-42c5-8823-0edd346f99bb'
      source: 'gyeonggi'
      name: 'ê²½ê¸°ë„êµìœ¡ì²­ êµ¬ì¸ì •ë³´ì¡°íšŒ'

    - board_id: '5a94f47d-5feb-4821-99af-f8805cc3d619'
      source: 'seongnam'
      name: 'ì„±ë‚¨êµìœ¡ì§€ì›ì²­ êµ¬ì¸'

    - board_id: '55d09cac-71aa-48d5-a8b8-bbd9181970bb'
      source: 'uijeongbu'
      name: 'ì˜ì •ë¶€êµìœ¡ì§€ì›ì²­ êµ¬ì¸'

    - board_id: '5d7799d9-5d8d-47a2-b0df-6dd4f39449bd'
      source: 'ai-generated'
      name: 'êµ¬ë¦¬ë‚¨ì–‘ì£¼ ê¸°ê°„ì œêµì‚¬'

    - board_id: 'de02eada-6569-45df-9f4d-45a4fcc51879'
      source: 'ai-generated'
      name: 'ê°€í‰êµìœ¡ì§€ì›ì²­ ê¸°ê°„ì œêµì› êµ¬ì¸êµ¬ì§'
```

#### ê²€ì¦ ê²°ê³¼
- 5ê°œ ê²Œì‹œíŒ ëª¨ë‘ DB ìŠ¹ì¸ ê²Œì‹œíŒê³¼ 100% ë™ê¸°í™” âœ…
- ëª¨ë“  ê²Œì‹œíŒ `is_active=true`, `approved_at IS NOT NULL` âœ…
- êµ¬ë¦¬ë‚¨ì–‘ì£¼ source ìˆ˜ì • ì™„ë£Œ (`ai-generated`) âœ…

#### ê²€ì¦ ìŠ¤í¬ë¦½íŠ¸
`scripts/db/verify-crawl-boards.ts`: ì „ì²´ í¬ë¡¤ë§ ê²Œì‹œíŒ ì„¤ì • ì •ë°€ ì§„ë‹¨

---

## ëœë”©í˜ì´ì§€-ì¸ë ¥ì¹´ë“œ ì—°ë™ ìš”êµ¬ì‚¬í•­

### í•µì‹¬ ìš”êµ¬ì‚¬í•­

1. **ê°„í¸í•œ ì¸ë ¥ ë“±ë¡ í—ˆë“¤ ë‚®ì¶”ê¸°**
   - íšŒì›ê°€ì… ì—†ì´ ëœë”©í˜ì´ì§€ì—ì„œ ë°”ë¡œ ì¸ë ¥ì¹´ë“œ ë“±ë¡
   - í•„ìˆ˜ ì •ë³´ë§Œ ê°„ë‹¨íˆ ì…ë ¥

2. **ì¦‰ê°ì ì¸ ì‹œê°ì  í”¼ë“œë°±**
   - ì…ë ¥í•œ ì •ë³´ë¡œ **ì‹¤ì œ ì¸ë ¥ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸°** í‘œì‹œ
   - "ì´ë ‡ê²Œ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ì„œ ì„ ìƒë‹˜ì„ í•™êµì™€ ì—°ê²°í•˜ê² ìŠµë‹ˆë‹¤"
   - ì‹¤ì œ ë©”ì¸í˜ì´ì§€ì™€ ë™ì¼í•œ `TalentCard` ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

3. **ìì—°ìŠ¤ëŸ¬ìš´ ì¸ë ¥í’€ í™•ë³´**
   - ëœë”©í˜ì´ì§€ â†’ ì¸ë ¥ì¹´ë“œ ë“±ë¡ â†’ ë©”ì¸í˜ì´ì§€ ë…¸ì¶œ
   - LocalStorageì— ë“±ë¡ ì •ë³´ ì €ì¥ (ë¹„íšŒì›)
   - ë‚˜ì¤‘ì— íšŒì›ê°€ì… ì‹œ ìë™ ì—°ê²°

4. **êµì‚¬ ë¶„ê¸° ì²˜ë¦¬**
   - êµì‚¬ë§Œ ì„ íƒ: ì¸ë ¥ì¹´ë“œ ë“±ë¡ í”„ë¡œì„¸ìŠ¤ ìŠ¤í‚µ
   - ê°•ì‚¬/í–‰ì •ì¸ë ¥/ì—…ì²´ í¬í•¨: ì¸ë ¥ì¹´ë“œ ë“±ë¡ ì§„í–‰

---

## í˜„ì¬ ì‹œìŠ¤í…œ êµ¬ì¡° ë¶„ì„

### 1. Landing.tsx (ëœë”©í˜ì´ì§€)

#### í˜„ì¬ ë‹¨ê³„ êµ¬ì„± (15ë‹¨ê³„)
```typescript
type Step =
  | 'greeting'           // 1. ì¸ì‚¬
  | 'name'              // 2. ì´ë¦„ ì…ë ¥
  | 'role'              // 3. ì—­í•  ì„ íƒ (êµì‚¬/ê°•ì‚¬/í–‰ì •ì¸ë ¥/ì—…ì²´)
  | 'region'            // 4. ì§€ì—­ ì„ íƒ
  | 'field'             // 5. ë¶„ì•¼ ì„ íƒ
  | 'phone'             // 6. ì—°ë½ì²˜ ì…ë ¥
  | 'review'            // 7. ì…ë ¥ ë‚´ìš© í™•ì¸
  | 'card-registration' // 8. "ê´€ì‹¬ìˆìŒ" ì„ íƒ
  | 'done';             // 9. ì™„ë£Œ â†’ ë©”ì¸í˜ì´ì§€ ì´ë™
```

#### ë¬¸ì œì 
- ìˆ˜ì§‘ë§Œ í•˜ê³  **ì €ì¥ ì•ˆ í•¨** âŒ
- ì¸ë ¥ì¹´ë“œ ë“±ë¡ í”„ë¡œì„¸ìŠ¤ ì—†ìŒ âŒ
- ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ ì—†ìŒ âŒ
- ë©”ì¸í˜ì´ì§€ë¡œ ë°”ë¡œ ì´ë™ë§Œ í•¨

---

### 2. TalentRegistrationForm.tsx (ì¸ë ¥ ë“±ë¡ í¼)

#### ì…ë ¥ í•„ë“œ êµ¬ì¡° (8ê°œ í•„ìˆ˜ + 2ê°œ ì„ íƒ)

**í•„ìˆ˜ í•„ë“œ (8ê°œ)**:
```typescript
1. name: string                    // ì´ë¦„
2. specialty: SpecialtyFormData    // ì „ë¬¸ ë¶„ì•¼ (ë³µí•© ê°ì²´)
   {
     contractTeacher: { enabled: boolean }
     kindergarten: { enabled: boolean }
     elementary: { enabled: boolean }
     secondary: { enabled: boolean }
     afterSchool: { enabled: boolean }
     administrative: { enabled: boolean }
     vendor: { enabled: boolean }
   }
3. experience: 'ì‹ ê·œ' | '1~3ë…„' | '3~5ë…„' | '5ë…„ ì´ìƒ'  // ê²½ë ¥
4. location: RegionFormData         // ì§€ì—­ (ë³µí•© ê°ì²´)
   {
     seoul: string[]                 // ['ê°•ë‚¨êµ¬', 'ì„œì´ˆêµ¬']
     gyeonggi: string[]              // ['ì„±ë‚¨ì‹œ', 'ìˆ˜ì›ì‹œ']
     seoulAll: boolean
     gyeonggiAll: boolean
   }
5. phone: string                    // ì „í™”ë²ˆí˜¸
6. email: string                    // ì´ë©”ì¼

// ì„ íƒ í•„ë“œ (2ê°œ)
7. license?: string                 // ìê²©/ë©´í—ˆ
8. introduction?: string            // ìê¸°ì†Œê°œ
```

---

### 3. TalentCard.tsx (ì¸ë ¥ì¹´ë“œ ì»´í¬ë„ŒíŠ¸)

#### í‘œì‹œ ì •ë³´
- **ìƒë‹¨ ì»¬ëŸ¬ ë°”**: ë…¹ìƒ‰ (`#c5e3d8`)
- **íƒ€ì… ë±ƒì§€**: "ì¸ë ¥"
- **ì´ë¦„**: `talent.name`
- **ì „ë¬¸ ë¶„ì•¼**: `talent.specialty` (ìë™ ìƒì„± ìš”ì•½)
- **íƒœê·¸**: `talent.tags` ë°°ì—´ (ìµœëŒ€ 2ê°œ í‘œì‹œ)
- **ì§€ì—­**: ğŸ“ `talent.location` ë°°ì—´ ("ì„œìš¸-ê°•ë‚¨êµ¬" í˜•ì‹)
- **ê²½ë ¥**: ğŸ’¼ `talent.experience_years` â†’ "ì‹ ê·œ", "2ë…„", "4ë…„", "6ë…„ ì´ìƒ"
- **ì—°ë½ì²˜**: ğŸ“ `talent.phone`, @ `talent.email`
- **í‰ì **: â­ `talent.rating`, ë¦¬ë·° `talent.review_count`ê°œ
- **í”„ë¡œí•„ ì´ë¯¸ì§€**: `specialty` ê¸°ë°˜ ìë™ ë§¤í•‘
- **ë³¸ì¸ ì¹´ë“œ**: "ìˆ˜ì •í•˜ê¸°" ë²„íŠ¼ í‘œì‹œ

---

### 4. talents í…Œì´ë¸” (DB ìŠ¤í‚¤ë§ˆ)

```sql
CREATE TABLE public.talents (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id),  -- NULL í—ˆìš© (ë¹„íšŒì› ë“±ë¡ ì§€ì›)

  -- ê¸°ë³¸ ì •ë³´
  name TEXT NOT NULL,
  specialty TEXT NOT NULL,              -- ìë™ ìƒì„± ìš”ì•½ ("ê¸°ê°„ì œêµì‚¬, ì´ˆë“±")
  tags TEXT[],                          -- ìë™ ìƒì„± íƒœê·¸ (["ê¸°ê°„ì œ", "ì´ˆë“±"])

  -- ì§€ì—­/ê²½ë ¥
  location TEXT[] NOT NULL,             -- ["ì„œìš¸-ê°•ë‚¨êµ¬", "ì„œìš¸-ì„œì´ˆêµ¬"]
  experience_years INTEGER NOT NULL,    -- 0, 2, 4, 6

  -- ì—°ë½ì²˜
  phone TEXT NOT NULL,
  email TEXT,

  -- ì„ íƒ ì •ë³´
  license TEXT,
  introduction TEXT,

  -- ë©”íƒ€ë°ì´í„°
  form_payload JSONB,                   -- ì›ë³¸ í¼ ë°ì´í„° (ë³µì›ìš©)
  is_verified BOOLEAN DEFAULT false,
  rating DECIMAL(2,1),
  review_count INTEGER DEFAULT 0,

  created_at TIMESTAMPTZ DEFAULT now(),
  updated_at TIMESTAMPTZ DEFAULT now()
);
```

#### RLS ì •ì±…
```sql
-- ë¹„íšŒì› INSERT í—ˆìš© í•„ìš”
ALTER TABLE talents ENABLE ROW LEVEL SECURITY;

-- ëª¨ë“  ì‚¬ìš©ì ì¡°íšŒ ê°€ëŠ¥
CREATE POLICY "Anyone can read talents"
  ON talents FOR SELECT USING (true);

-- ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ë³¸ì¸ ë°ì´í„° ìˆ˜ì •/ì‚­ì œ
CREATE POLICY "Users can update own talents"
  ON talents FOR UPDATE USING (auth.uid() = user_id);

-- ë¹„íšŒì› INSERT í—ˆìš© (ì‹ ê·œ ì¶”ê°€ í•„ìš”) â­
CREATE POLICY "Anyone can insert talents"
  ON talents FOR INSERT WITH CHECK (true);
```

---

## êµ¬í˜„ ê³„íš

### Phase 1: ëœë”©í˜ì´ì§€ í™•ì¥ (19ë‹¨ê³„)

#### ì‹ ê·œ ë‹¨ê³„ ì¶”ê°€
```typescript
type Step =
  | 'greeting'           // 1. ì¸ì‚¬
  | 'name'              // 2. ì´ë¦„
  | 'role'              // 3. ì—­í•  (êµì‚¬/ê°•ì‚¬/í–‰ì •ì¸ë ¥/ì—…ì²´)
  | 'region'            // 4. ì§€ì—­
  | 'field'             // 5. ë¶„ì•¼
  | 'phone'             // 6. ì—°ë½ì²˜
  | 'review'            // 7. ì…ë ¥ ë‚´ìš© í™•ì¸
  | 'card-registration' // 8. "ê´€ì‹¬ìˆìŒ" ì„ íƒ

  // ğŸ†• ì‹ ê·œ ë‹¨ê³„
  | 'specialty-detail'  // 15. ì „ë¬¸ ë¶„ì•¼ ìƒì„¸ ì„ íƒ â­
  | 'experience'        // 16. ê²½ë ¥ ì„ íƒ â­
  | 'optional-info'     // 17. ìê²©/ë©´í—ˆ, ìê¸°ì†Œê°œ (ì„ íƒ) â­
  | 'email'             // 18. ì´ë©”ì¼ ì…ë ¥ â­
  | 'preview'           // 19. ì¸ë ¥ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° â­â­â­
  | 'done';             // 20. ì™„ë£Œ
```

---

### Phase 2: ì¸ë ¥ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° êµ¬í˜„ (í•µì‹¬!)

#### Step 19: preview ë‹¨ê³„
```tsx
// Landing.tsxì—ì„œ ì¶”ê°€
{step === 'preview' && (
  <div className="space-y-6">
    <div className="text-center space-y-4">
      <h2 className="text-2xl font-bold text-gray-900">
        ğŸ‰ ë“±ë¡ ì™„ë£Œ!
      </h2>
      <p className="text-gray-700 leading-relaxed">
        <span className="text-talent-primary font-semibold">{userInput.name}</span>ë‹˜ì˜ ì •ë³´ê°€ ì•„ë˜ì™€ ê°™ì´ ë“±ë¡ë©ë‹ˆë‹¤.
      </p>
      <p className="text-sm text-gray-600">
        ì´ë ‡ê²Œ ì„œë¹„ìŠ¤ì— ë“±ë¡ë˜ì–´ì„œ ì„ ìƒë‹˜ì„ í•™êµì™€ ì—°ê²°í•˜ê² ìŠµë‹ˆë‹¤.
      </p>
    </div>

    {/* ì‹¤ì œ TalentCard ì»´í¬ë„ŒíŠ¸ í‘œì‹œ â­ */}
    <div className="max-w-md mx-auto">
      <TalentCard
        talent={transformLandingToTalent(userInput)}
        isPreview={true}
      />
    </div>

    <div className="space-y-3">
      <button
        onClick={handleCompleteRegistration}
        className="w-full bg-talent-primary text-white py-3 rounded-lg"
      >
        ë“±ë¡ ì™„ë£Œí•˜ê¸°
      </button>
      <button
        onClick={() => setStep('specialty-detail')}
        className="w-full border border-gray-300 py-3 rounded-lg"
      >
        ìˆ˜ì •í•˜ê¸°
      </button>
    </div>
  </div>
)}
```

---

### Phase 3: ë°ì´í„° ë³€í™˜ ìœ í‹¸ë¦¬í‹°

#### `src/lib/utils/landingTransform.ts` ìƒì„±
```typescript
import { TalentRow } from '@/lib/supabase/talents';

interface LandingInput {
  name: string;
  role: string[];  // ["ê°•ì‚¬", "í–‰ì •ì¸ë ¥"]
  region: string;  // "ì„œìš¸"
  field: string;   // "ì²´ìœ¡"
  phone: string;
  specialty?: SpecialtyFormData;
  experience?: string;
  email?: string;
  license?: string;
  introduction?: string;
}

/**
 * ëœë”©í˜ì´ì§€ ì…ë ¥ê°’ì„ TalentRow í˜•ì‹ìœ¼ë¡œ ë³€í™˜
 */
export function transformLandingToTalent(input: LandingInput): TalentRow {
  return {
    id: crypto.randomUUID(),  // ë¯¸ë¦¬ë³´ê¸°ìš© ì„ì‹œ ID
    user_id: null,
    name: input.name,
    specialty: generateSpecialty(input),
    tags: generateTags(input),
    location: formatLocation(input),
    experience_years: parseExperience(input.experience),
    phone: input.phone,
    email: input.email || null,
    license: input.license || null,
    introduction: input.introduction || null,
    form_payload: input,  // ì›ë³¸ ë°ì´í„° ì €ì¥
    is_verified: false,
    rating: null,
    review_count: 0,
    created_at: new Date().toISOString(),
    updated_at: new Date().toISOString(),
  };
}

/**
 * specialty ìë™ ìƒì„±
 * ì˜ˆ: "ê¸°ê°„ì œêµì‚¬, ì´ˆë“±" or "ê°•ì‚¬, ì²´ìœ¡"
 */
function generateSpecialty(input: LandingInput): string {
  const roles = input.role.join(', ');
  const field = input.field || '';
  return field ? `${roles}, ${field}` : roles;
}

/**
 * tags ìë™ ìƒì„±
 * ì˜ˆ: ["ê¸°ê°„ì œ", "ì´ˆë“±"] or ["ê°•ì‚¬", "ì²´ìœ¡"]
 */
function generateTags(input: LandingInput): string[] {
  const tags: string[] = [];

  input.role.forEach(role => {
    if (role.includes('ê¸°ê°„ì œ')) tags.push('ê¸°ê°„ì œ');
    if (role.includes('ê°•ì‚¬')) tags.push('ê°•ì‚¬');
    if (role.includes('í–‰ì •')) tags.push('í–‰ì •');
    if (role.includes('ì—…ì²´')) tags.push('ì—…ì²´');
  });

  if (input.field) tags.push(input.field);

  return tags.slice(0, 3);  // ìµœëŒ€ 3ê°œ
}

/**
 * location ë°°ì—´ ìƒì„±
 * ì˜ˆ: ["ì„œìš¸-ê°•ë‚¨êµ¬", "ì„œìš¸-ì„œì´ˆêµ¬"]
 */
function formatLocation(input: LandingInput): string[] {
  // í˜„ì¬ ëœë”©í˜ì´ì§€ëŠ” ê´‘ì—­ë§Œ ë°›ìŒ
  // ì¶”í›„ ìƒì„¸ ì§€ì—­ ì„ íƒ ì‹œ í™•ì¥ ê°€ëŠ¥
  return [input.region];
}

/**
 * ê²½ë ¥ ë¬¸ìì—´ â†’ experience_years ë³€í™˜
 */
function parseExperience(exp?: string): number {
  if (!exp) return 0;
  if (exp === 'ì‹ ê·œ') return 0;
  if (exp === '1~3ë…„') return 2;
  if (exp === '3~5ë…„') return 4;
  if (exp === '5ë…„ ì´ìƒ') return 6;
  return 0;
}

/**
 * ì „í™”ë²ˆí˜¸ í•´ì‹± (ë¹„íšŒì› ì‹ë³„ì)
 */
export function hashPhone(phone: string): string {
  // ê°„ë‹¨í•œ í•´ì‹± (ì¶”í›„ bcrypt ë“±ìœ¼ë¡œ ê°•í™” ê°€ëŠ¥)
  return `guest_${btoa(phone).slice(0, 16)}`;
}
```

---

### Phase 4: ë¹„íšŒì› ì¸ë ¥ì¹´ë“œ ë“±ë¡

#### DB ë§ˆì´ê·¸ë ˆì´ì…˜
```sql
-- supabase/migrations/20250211_landing_talent_registration.sql

-- ë¹„íšŒì› ë“±ë¡ ì§€ì›ì„ ìœ„í•œ ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE talents ADD COLUMN IF NOT EXISTS temp_identifier TEXT;
ALTER TABLE talents ADD COLUMN IF NOT EXISTS is_guest_registered BOOLEAN DEFAULT false;
ALTER TABLE talents ADD COLUMN IF NOT EXISTS registered_via TEXT DEFAULT 'form';

-- ë¹„íšŒì› INSERT í—ˆìš© RLS ì •ì±…
DROP POLICY IF EXISTS "Anyone can insert talents" ON talents;
CREATE POLICY "Anyone can insert talents"
  ON talents FOR INSERT
  WITH CHECK (true);

-- temp_identifier ì¸ë±ìŠ¤ (ë¹„íšŒì› ì¤‘ë³µ ì²´í¬ìš©)
CREATE INDEX IF NOT EXISTS idx_talents_temp_identifier ON talents(temp_identifier);
```

#### Landing.tsx ìˆ˜ì •
```typescript
async function handleCompleteRegistration() {
  try {
    const talentData = transformLandingToTalent(userInput);
    const tempId = hashPhone(userInput.phone);

    // Supabase INSERT
    const { data, error } = await supabase
      .from('talents')
      .insert({
        ...talentData,
        temp_identifier: tempId,
        is_guest_registered: true,
        registered_via: 'landing',
      })
      .select()
      .single();

    if (error) throw error;

    // LocalStorage ì €ì¥ (ë©”ì¸í˜ì´ì§€ í•˜ì´ë¼ì´íŠ¸ìš©)
    localStorage.setItem('recently_registered_talent', JSON.stringify({
      id: data.id,
      registered_at: new Date().toISOString(),
    }));

    setStep('done');
  } catch (error) {
    console.error('ë“±ë¡ ì‹¤íŒ¨:', error);
    alert('ë“±ë¡ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
  }
}
```

---

### Phase 5: ë©”ì¸í˜ì´ì§€ í•˜ì´ë¼ì´íŠ¸

#### App.tsx ìˆ˜ì •
```typescript
useEffect(() => {
  const recentRegistration = localStorage.getItem('recently_registered_talent');

  if (recentRegistration) {
    const { id, registered_at } = JSON.parse(recentRegistration);
    const registeredTime = new Date(registered_at).getTime();
    const now = Date.now();

    // 10ë¶„ ì´ë‚´ ë“±ë¡ì´ë©´ í•˜ì´ë¼ì´íŠ¸
    if (now - registeredTime < 10 * 60 * 1000) {
      setHighlightTalentId(id);
      setActiveTab('talents');  // ì¸ë ¥ì¹´ë“œ í† ê¸€ ìë™ ON

      // 5ì´ˆ í›„ í•˜ì´ë¼ì´íŠ¸ ì œê±°
      setTimeout(() => {
        setHighlightTalentId(null);
        localStorage.removeItem('recently_registered_talent');
      }, 5000);
    }
  }
}, []);
```

#### TalentCard.tsx ìˆ˜ì •
```tsx
<div
  className={cn(
    "border rounded-lg p-4 hover:shadow-lg transition",
    isHighlight && "ring-4 ring-talent-primary ring-opacity-50 animate-pulse"
  )}
>
  {/* ì¹´ë“œ ë‚´ìš© */}
</div>
```

---

## ë°ì´í„° íë¦„ ì„¤ê³„

```
ëœë”©í˜ì´ì§€ (Landing.tsx)
    â†“
ì‚¬ìš©ì ì…ë ¥ ìˆ˜ì§‘ (19ë‹¨ê³„)
    â†“
ë°ì´í„° ë³€í™˜ (transformLandingToTalent)
    â†“
ì¸ë ¥ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° (TalentCard ì»´í¬ë„ŒíŠ¸)
    â†“
"ë“±ë¡ ì™„ë£Œí•˜ê¸°" í´ë¦­
    â†“
Supabase INSERT (talents í…Œì´ë¸”)
    â”œâ”€ temp_identifier: hashPhone(phone)
    â”œâ”€ is_guest_registered: true
    â””â”€ registered_via: 'landing'
    â†“
LocalStorage ì €ì¥ (í•˜ì´ë¼ì´íŠ¸ìš©)
    â†“
ë©”ì¸í˜ì´ì§€ ì´ë™
    â†“
ì¸ë ¥ì¹´ë“œ í† ê¸€ ìë™ ON + í•˜ì´ë¼ì´íŠ¸ â­
```

---

## íŒŒì¼ ìˆ˜ì • ëª©ë¡

### ì‹ ê·œ ìƒì„±
1. âœ… `scripts/db/verify-seongnam-locations.ts` - ì„±ë‚¨ í¬ë¡¤ë§ ê²€ì¦
2. âœ… `scripts/db/verify-namyangju-crawl.ts` - êµ¬ë¦¬ë‚¨ì–‘ì£¼ í¬ë¡¤ë§ ê²€ì¦
3. âœ… `scripts/db/analyze-misung-cards.ts` - "ë¯¸ìƒ" ì¹´ë“œ ì›ì¸ ë¶„ì„
4. âœ… `scripts/db/verify-crawl-boards.ts` - ì „ì²´ ê²Œì‹œíŒ ì •ë°€ ì§„ë‹¨
5. ğŸ†• `src/lib/utils/landingTransform.ts` - ë°ì´í„° ë³€í™˜ ìœ í‹¸ë¦¬í‹°
6. ğŸ†• `supabase/migrations/20250211_landing_talent_registration.sql` - ë¹„íšŒì› ë“±ë¡ DB ìŠ¤í‚¤ë§ˆ

### ìˆ˜ì • í•„ìš”
1. âœ… `.github/workflows/run-crawler.yml` - êµ¬ë¦¬ë‚¨ì–‘ì£¼ source ìˆ˜ì • ì™„ë£Œ
2. ğŸ†• `src/pages/Landing.tsx` - 19ë‹¨ê³„ í™•ì¥ + ë¯¸ë¦¬ë³´ê¸° ì¶”ê°€
3. ğŸ†• `src/components/cards/TalentCard.tsx` - í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼ ì¶”ê°€
4. ğŸ†• `src/App.tsx` - í•˜ì´ë¼ì´íŠ¸ ë¡œì§ ì¶”ê°€

---

## êµ¬í˜„ ìš°ì„ ìˆœìœ„

### Priority 1 (í•µì‹¬ ê¸°ëŠ¥)
1. âœ… í¬ë¡¤ë§ ì‹œìŠ¤í…œ ë¬¸ì œ í•´ê²° (ì™„ë£Œ)
2. ğŸŸ¡ `landingTransform.ts` ìœ í‹¸ë¦¬í‹° ì‘ì„±
3. ğŸŸ¡ ëœë”©í˜ì´ì§€ 19ë‹¨ê³„ í™•ì¥
4. ğŸŸ¡ ì¸ë ¥ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° êµ¬í˜„ â­â­â­
5. ğŸŸ¡ ë¹„íšŒì› ë“±ë¡ DB ë§ˆì´ê·¸ë ˆì´ì…˜

### Priority 2 (ë¶€ê°€ ê¸°ëŠ¥)
6. ğŸŸ¡ ë©”ì¸í˜ì´ì§€ í•˜ì´ë¼ì´íŠ¸
7. ğŸŸ¡ êµì‚¬ ë¶„ê¸° ì²˜ë¦¬ ë©”ì‹œì§€ ìˆ˜ì •
8. ğŸŸ¡ LocalStorage ì—°ë™

### Priority 3 (ì¶”í›„ ê³ ë„í™”)
9. âšª íšŒì›ê°€ì… ì‹œ ë¹„íšŒì› ë°ì´í„° ìë™ ì—°ê²°
10. âšª ì „í™”ë²ˆí˜¸ í•´ì‹± ê°•í™” (bcrypt)
11. âšª ì¸ë ¥ì¹´ë“œ ìˆ˜ì • ê¸°ëŠ¥
12. âšª ì¤‘ë³µ ë“±ë¡ ë°©ì§€ ë¡œì§

---

## ê¸°ìˆ  ìŠ¤íƒ

- **Frontend**: React 18, TypeScript, Vite, Tailwind CSS
- **State Management**: Zustand
- **Database**: Supabase (PostgreSQL + RLS)
- **Authentication**: Supabase Auth
- **Deployment**: Cloudflare Pages

---

## ì°¸ê³  ë¬¸ì„œ

- `CLAUDE.md` - í”„ë¡œì íŠ¸ ì „ì²´ êµ¬ì¡°
- `BACKEND_STRUCTURE.md` - ë°±ì—”ë“œ ì•„í‚¤í…ì²˜
- `FRONTEND_STRUCTURE.md` - í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°
- `COLOR_STRUCTURE.md` - ì»¬ëŸ¬ ì‹œìŠ¤í…œ
- `.github/workflows/run-crawler.yml` - í¬ë¡¤ë§ ìë™í™”

---

## ë³€ê²½ ì´ë ¥

### 2025-11-05
- âœ… ì„±ë‚¨/êµ¬ë¦¬ë‚¨ì–‘ì£¼ í¬ë¡¤ë§ ì‹¤í–‰ ë° location í•„ë“œ ê²€ì¦ ì™„ë£Œ
- âœ… "ë¯¸ìƒ" ì¹´ë“œ ì›ì¸ ë¶„ì„ (ì˜ˆì „ ë°ì´í„° vs í˜„ì¬ ë¬¸ì œ êµ¬ë¶„)
- âœ… êµ¬ë¦¬ë‚¨ì–‘ì£¼ í¬ë¡¤ëŸ¬ source ìˆ˜ì • (`namyangju` â†’ `ai-generated`)
- âœ… ìë™ í¬ë¡¤ë§ ìŠ¤ì¼€ì¤„ ê²€ì¦ (5ê°œ ê²Œì‹œíŒ ë™ê¸°í™” í™•ì¸)
- ğŸŸ¡ ëœë”©í˜ì´ì§€-ì¸ë ¥ì¹´ë“œ ì—°ë™ ì‹œìŠ¤í…œ ì„¤ê³„ ì™„ë£Œ
- ğŸ“ ë³¸ ë¬¸ì„œ ì‘ì„±

---

## Next Steps

1. `landingTransform.ts` ìœ í‹¸ë¦¬í‹° êµ¬í˜„
2. ëœë”©í˜ì´ì§€ Step 15~19 ì¶”ê°€
3. ì¸ë ¥ì¹´ë“œ ë¯¸ë¦¬ë³´ê¸° ë Œë”ë§ í…ŒìŠ¤íŠ¸
4. DB ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
5. í†µí•© í…ŒìŠ¤íŠ¸ ë° ë°°í¬

---

**ë¬¸ì„œ ì‘ì„±ì**: Claude Code
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-05
