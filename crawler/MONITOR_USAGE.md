# 크롤러 실시간 모니터링 대시보드 사용법

## 🚀 실행 방법

### Windows (PowerShell)

```powershell
cd c:\PRODUCT\SellmeBuyme\crawler
.\run-all-local.ps1
```

**동작:**
1. 자동으로 새 창에서 실시간 대시보드가 실행됩니다
2. 35개 크롤러가 순차적으로 실행됩니다
3. 대시보드에서 진행 상황을 실시간으로 확인할 수 있습니다

---

## 📊 대시보드 화면 설명

```
╔═══════════════════════════════════════════════════════════════════╗
║  🚀 셀미바이미 35개 크롤러 실행 현황      [2026-01-25 11:42:35]  ║
╠═══════════════════════════════════════════════════════════════════╣
║  [████████████████████████░░░░] 80% (28/35)                       ║
╠═══════════════════════════════════════════════════════════════════╣
║  📈 실시간 통계                                                   ║
║    ✅ 성공: 26개 | ❌ 실패: 2개 | 🔄 진행중: 1개 | ⏳ 대기: 6개  ║
║    📋 전체: 1,039건 | 🆕 신규: 147건 | ⏭️  중복: 892건           ║
║    ⏱️  소요시간: 42분 18초 | ⏳ 예상 남은 시간: 약 11분          ║
╠═══════════════════════════════════════════════════════════════════╣
║  🗺️  지역별 현황                                                  ║
║    광역시도 (17개)                                                ║
║      ✅ seoul  ✅ busan  ✅ daegu  ✅ incheon ...                ║
║    경기 기초지자체 (18개)                                         ║
║      🔄 yangpyeong  ⏳ pocheon  ⏳ yeoncheon ...                 ║
╠═══════════════════════════════════════════════════════════════════╣
║  📝 최근 활동 로그                                                ║
║    [11:42:30] ✅ yangpyeong - 완료, 신규 4개, 중복 8개 (180초)    ║
║    [11:41:55] ✅ paju - 완료, 신규 7개, 중복 12개 (165초)         ║
╠═══════════════════════════════════════════════════════════════════╣
║  🎯 현재 작업: yangpyeong (28/35) - 크롤링 중... (발견: 12개)    ║
╚═══════════════════════════════════════════════════════════════════╝
```

### 아이콘 의미

| 아이콘 | 의미 | 설명 |
|--------|------|------|
| ✅ | 완료 (Completed) | 크롤링이 성공적으로 완료됨 |
| ❌ | 실패 (Failed) | 크롤링 중 오류 발생 |
| 🔄 | 진행중 (Running) | 현재 크롤링 진행 중 |
| ⏳ | 대기 (Pending) | 아직 시작하지 않음 |
| 📊 | 통계 | 전체 통계 정보 |
| 📈 | 증가 | 신규 데이터 발견 |
| 📋 | 목록 | 전체 발견 개수 |
| 🗺️  | 지도 | 지역별 현황 |
| ⏱️  | 타이머 | 소요 시간 |
| 🎯 | 타겟 | 현재 작업 중인 항목 |

---

## ⌨️ 키보드 단축키

| 키 | 기능 |
|----|------|
| `Q` 또는 `ESC` | 모니터 종료 |
| `R` | 화면 새로고침 |
| 마우스 휠 | 로그 스크롤 (로그 영역에서) |

---

## 🎨 더 예쁜 이모지로 보기 (선택사항)

### TossFaceFontMac 폰트 설치

1. `public/fonts/TossFaceFontMac.ttf` 파일을 더블클릭
2. "설치" 버튼 클릭
3. Windows Terminal 실행
4. `Ctrl + ,` (설정 열기)
5. 모양 → 글꼴 모양 → "TossFaceFontMac" 선택
6. 저장 후 터미널 재시작

**효과:**
- Toss 스타일의 감성적인 이모지 표시
- 한글 폰트도 깔끔하게 렌더링
- 전체적으로 더 세련된 UI

---

## 📁 관련 파일

| 파일 | 설명 |
|------|------|
| `run-all-local.ps1` | 35개 크롤러 실행 스크립트 (모니터 자동 실행) |
| `monitor.js` | blessed 기반 TUI 대시보드 |
| `lib/progressTracker.js` | 진행 상태 추적 유틸리티 |
| `.progress.json` | 실시간 진행 상태 파일 (자동 생성/삭제) |

---

## 🐛 문제 해결

### 모니터 창이 열리지 않아요
- Node.js가 설치되어 있는지 확인하세요
- `blessed` 패키지가 설치되어 있는지 확인하세요: `npm install blessed`

### 이모지가 깨져 보여요
- Windows Terminal을 사용하고 계신지 확인하세요 (cmd.exe는 제한적)
- TossFaceFontMac 폰트를 설치하시면 더 예쁘게 표시됩니다

### 대시보드가 업데이트되지 않아요
- `R` 키를 눌러 수동으로 새로고침하세요
- `.progress.json` 파일이 생성되었는지 확인하세요

### 크롤러가 실패했어요
- 대시보드의 로그 영역에서 상세한 오류 메시지를 확인하세요
- 해당 지역의 상태 아이콘이 ❌로 표시됩니다

---

## 💡 팁

1. **모니터만 실행하기**
   ```bash
   node monitor.js
   ```
   - 이미 실행 중인 크롤러의 진행 상황을 별도로 모니터링할 수 있습니다

2. **특정 지역만 테스트**
   ```bash
   node index.js --source=seoul
   ```
   - 개별 크롤러 테스트 시에도 `.progress.json`이 업데이트됩니다

3. **완료 후 검증**
   ```bash
   node verify-crawl-results.js
   ```
   - 모든 크롤러가 완료된 후 실제 DB에 등록되었는지 확인하세요

---

## 📊 예상 실행 시간

- **전체 35개 크롤러**: 약 30-60분
- **광역시도 17개**: 약 20-30분
- **경기 기초지자체 18개**: 약 15-25분

실제 시간은 네트워크 속도와 각 사이트의 응답 시간에 따라 달라집니다.

---

## 🎯 완료 후 확인 사항

1. **대시보드 통계 확인**
   - 성공/실패 개수
   - 신규 공고 발견 개수
   - 중복 스킵 개수

2. **실패한 지역 확인**
   - ❌ 아이콘으로 표시된 지역
   - 로그에서 오류 메시지 확인

3. **DB 검증**
   ```bash
   node verify-crawl-results.js
   ```
   - 실제 Supabase DB에 등록되었는지 확인
   - 35개 지역 모두 데이터가 있는지 확인
   - 부산 특별 확인 (최근 실패 이력)

---

**제작**: Claude Code (2026-01-25)
**기술**: Node.js + blessed + PowerShell
